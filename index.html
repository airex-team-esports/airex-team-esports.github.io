<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#050505">
  <meta name="description" content="Official Airex Team Esports Organization Site">
  <meta name="robots" content="index, follow">
  
  <title>AIREX TEAM | Official Site</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    /* –≠–∫—Ä–∞–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è */
    #auth-barrier {
        position: fixed;
        inset: 0;
        z-index: 10000;
        background: radial-gradient(circle at center, #1a1a1a 0%, #0a0a0a 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(20px);
        transition: 0.5s ease;
    }

    .auth-card {
        width: 100%;
        max-width: 400px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }

    .auth-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 25px;
        border-bottom: 1px solid var(--glass-border);
        padding-bottom: 10px;
    }

    .auth-tab {
        cursor: pointer;
        opacity: 0.5;
        font-family: var(--font-tech);
        font-size: 14px;
        transition: 0.3s;
    }

    .auth-tab.active {
        opacity: 1;
        color: var(--accent);
    }

    #tg-auth-container {
        margin-top: 15px;
        display: flex;
        justify-content: center;
    }

    /* –ü—Ä–æ—Ñ–∏–ª—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
    .user-profile-nav {
        display: none; /* –ü–æ–∫–∞–∂–µ–º –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ */
        align-items: center;
        gap: 10px;
        padding: 5px 15px;
        background: rgba(255,255,255,0.05);
        border-radius: 30px;
        border: 1px solid var(--glass-border);
        cursor: pointer;
    }

    .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid var(--accent);
    }

    /* --- CORE VARIABLES --- */
    :root {
      --accent: #ff004c;
      --accent-dim: rgba(255, 0, 76, 0.15);
      --accent-glow: rgba(255, 0, 76, 0.6); 
      --bg-deep: #020202;
      --glass-dark: rgba(12, 12, 12, 0.7);
      --glass-border: rgba(255, 255, 255, 0.06);
      --text-white: #ffffff;
      --text-gray: #a0a0a0;
      --success: #00ffa3;
      --font-main: 'Montserrat', sans-serif;
      --font-tech: 'Orbitron', sans-serif;
      --ease-out: cubic-bezier(0.23, 1, 0.32, 1);
    }

    /* --- RESET & BASE --- */
    html { scroll-behavior: smooth; }
    *, *::before, *::after { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    body {
      margin: 0; 
      background-color: var(--bg-deep);
      font-family: var(--font-main); 
      color: var(--text-white);
      min-height: 100vh; 
      overflow-x: hidden; 
      padding-top: 80px;
      user-select: none; 
      -webkit-user-select: none;
    }

    /* --- BACKGROUNDS --- */
    .bg-logo {
      position: fixed; top: 50%; left: 50%; 
      transform: translate(-50%, -50%);
      width: 80vw; height: 80vh;
      background: url('logo.png') center/contain no-repeat;
      opacity: 0.03; z-index: -1; 
      filter: grayscale(100%) brightness(2); 
      pointer-events: none;
    }
    
    /* --- NAVIGATION --- */
    .navbar {
      position: fixed; top: 0; inset-inline: 0; height: 72px;
      background: rgba(2, 2, 2, 0.85); 
      backdrop-filter: blur(25px) saturate(180%); 
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      border-bottom: 1px solid var(--glass-border); 
      z-index: 1000;
      display: flex; align-items: center; 
      padding: 0 5%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
      justify-content: space-between;
    }
    
    .nav-brand { 
      display: flex; align-items: center; gap: 12px; 
      flex-shrink: 0; 
    }
    .nav-brand img { 
      height: 40px; width: auto; 
      filter: drop-shadow(0 0 8px var(--accent-dim)); 
      transition: transform 0.3s var(--ease-out);
    }
    .nav-brand:hover img { transform: scale(1.05); }
    
    .nav-brand h1 {
      font-family: var(--font-tech); font-size: 18px; font-weight: 800; margin: 0;
      text-transform: uppercase; letter-spacing: 2px;
      background: linear-gradient(135deg, #fff 40%, #888);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    .nav-controls {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    /* Hamburger Menu Toggle */
    .menu-toggle {
      background: transparent; border: none; color: #fff;
      font-size: 24px; cursor: pointer; padding: 10px;
      transition: transform 0.3s ease, color 0.3s ease;
      z-index: 1002;
    }
    .menu-toggle:hover { color: var(--accent); transform: scale(1.1); text-shadow: 0 0 15px var(--accent-glow); }
    .menu-toggle.active { transform: rotate(90deg); color: var(--accent); }

    /* Dropdown Menu */
    .nav-dropdown {
      position: fixed; top: 75px; right: 20px; width: 220px;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 12px; padding: 10px;
      display: flex; flex-direction: column; gap: 5px;
      opacity: 0; visibility: hidden;
      transform: translateY(-20px) scale(0.95);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
      z-index: 1001;
    }
    .nav-dropdown.active { opacity: 1; visibility: visible; transform: translateY(0) scale(1); }

    /* Menu Items */
    .menu-item {
      display: flex; align-items: center; justify-content: flex-start;
      gap: 15px; padding: 12px 16px;
      background: transparent; border: none;
      color: var(--text-gray); font-family: var(--font-tech);
      font-size: 12px; text-transform: uppercase; font-weight: 600;
      letter-spacing: 1px; border-radius: 8px;
      cursor: pointer; transition: all 0.2s ease;
      text-align: left; width: 100%;
    }
    .menu-item i { width: 20px; text-align: center; font-size: 14px; transition: 0.2s; }
    .menu-item:hover { background: rgba(255, 255, 255, 0.05); color: #fff; padding-left: 20px; }
    .menu-item:hover i { color: var(--accent); text-shadow: 0 0 10px var(--accent); }
    
    .menu-item.active-tab {
      background: var(--accent-dim); color: #fff;
      border: 1px solid rgba(255, 0, 76, 0.2);
    }
    .menu-item.active-tab i { color: var(--accent); }

    .menu-item.join-btn {
      margin-top: 5px; border-top: 1px solid rgba(255,255,255,0.1);
      border-radius: 0 0 8px 8px; color: var(--accent);
    }
    .menu-item.join-btn:hover { background: var(--accent); color: #000; }
    .menu-item.join-btn:hover i { color: #000; text-shadow: none; }

    /* --- LAYOUT & ANIMATION --- */
    .container { max-width: 900px; margin: 0 auto; padding: 20px 15px 80px 15px; }
    section { display: none; opacity: 0; transform: translateY(15px); transition: 0.5s var(--ease-out); }
    section.active { display: block; opacity: 1; transform: translateY(0); }

    /* --- CARDS & UI --- */
    .card {
      background: var(--glass-dark);
      border: 1px solid var(--glass-border);
      border-radius: 16px; padding: 24px; margin-bottom: 20px;
      position: relative; overflow: hidden;
      box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
      transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
    }
    .card:hover { border-color: rgba(255,255,255,0.15); box-shadow: 0 15px 40px -10px rgba(0,0,0,0.7); }
    .card::before {
      content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      opacity: 0.6;
    }

    h2, h3, h4 { font-family: var(--font-tech); color: #fff; margin: 0 0 15px 0; letter-spacing: 1px; text-transform: uppercase; }
    p { line-height: 1.7; color: var(--text-gray); font-size: 14px; margin-bottom: 15px; margin-top: 0; font-weight: 300; }
    .text-center { text-align: center; }
    .text-accent { color: var(--accent); }
    .font-tech { font-family: var(--font-tech); }

    /* --- HERO --- */
    .hero-card { 
      padding: 60px 20px; text-align: center; 
      background: radial-gradient(circle at center, rgba(255,0,76,0.08) 0%, rgba(10,10,10,0.8) 100%);
      border: 1px solid rgba(255,0,76,0.2);
    }
    .hero-title {
      font-size: 38px; font-weight: 900; margin-bottom: 15px;
      text-shadow: 0 0 30px var(--accent-glow);
      position: relative; display: inline-block; letter-spacing: 4px;
    }
    
    .glitch { position: relative; color: white; }
    .glitch::before, .glitch::after {
      content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: var(--bg-deep); opacity: 0.8;
    }
    .glitch::before {
      left: 2px; text-shadow: -2px 0 #00ffff;
      clip: rect(24px, 550px, 90px, 0);
      animation: glitch-anim-2 3s infinite linear alternate-reverse;
    }
    .glitch::after {
      left: -2px; text-shadow: -2px 0 #ff004c;
      clip: rect(85px, 550px, 140px, 0);
      animation: glitch-anim-1 2.5s infinite linear alternate-reverse;
    }
    @keyframes glitch-anim-1 { 0% { clip: rect(20px, 9999px, 15px, 0); } 100% { clip: rect(50px, 9999px, 20px, 0); } }
    @keyframes glitch-anim-2 { 0% { clip: rect(10px, 9999px, 80px, 0); } 100% { clip: rect(90px, 9999px, 10px, 0); } }

    #typing-text { font-family: var(--font-tech); color: var(--text-gray); min-height: 40px; font-size: 13px; letter-spacing: 1px; }

    /* --- STATS --- */
    .stats-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
    .stat-card { 
      background: rgba(255, 255, 255, 0.02); 
      padding: 20px; text-align: center; 
      border-radius: 12px; border: 1px solid var(--glass-border);
      position: relative; overflow: hidden;
    }
    .stat-val-main { 
      font-family: var(--font-tech); color: var(--accent); 
      font-size: 28px; font-weight: 700; margin-bottom: 5px;
      text-shadow: 0 0 15px var(--accent-glow);
    }
    .stat-lbl { font-size: 11px; text-transform: uppercase; color: #666; font-weight: 600; letter-spacing: 1px; }

    /* --- MATCH CENTER --- */
    .match-card {
      border: 1px solid rgba(255, 0, 76, 0.3);
      background: linear-gradient(180deg, rgba(20,20,20,0.9) 0%, rgba(30,10,15,0.4) 100%);
    }
    .match-header { 
      display: flex; justify-content: space-between; align-items: center;
      font-size: 11px; font-family: var(--font-tech); margin-bottom: 20px; 
      letter-spacing: 1px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px;
    }
    .status-live { color: #00ff88; text-shadow: 0 0 10px rgba(0,255,136,0.4); animation: blink 2s infinite; }
    @keyframes blink { 50% { opacity: 0.5; } }

    .countdown { display: flex; justify-content: center; align-items: flex-end; gap: 12px; margin-bottom: 25px; font-family: var(--font-tech); }
    .cd-item { text-align: center; width: 50px; }
    .cd-num { font-size: 26px; color: #fff; font-weight: 700; line-height: 1; }
    .cd-lbl { font-size: 9px; color: var(--accent); margin-top: 6px; font-weight: 600; }

    .match-teams { 
      display: flex; justify-content: space-between; align-items: center; 
      border-top: 1px solid var(--glass-border); padding-top: 20px; position: relative;
    }
    .team-block { text-align: center; flex: 1; }
    .team-name { font-family: var(--font-tech); font-size: 20px; font-weight: 700; margin-bottom: 5px; }
    .team-sub { font-size: 10px; color: var(--text-gray); text-transform: uppercase; }
    .team-vs { 
      color: var(--accent); font-weight: 900; font-family: var(--font-tech); 
      font-size: 24px; font-style: italic; opacity: 0.8;
      position: absolute; left: 50%; transform: translateX(-50%); top: 20px;
    }

    /* --- BUTTONS --- */
    .btn-glitch {
      display: flex; align-items: center; justify-content: center;
      padding: 14px 28px; background: rgba(0,0,0,0.4);
      border: 1px solid var(--accent); color: #fff;
      font-family: var(--font-tech); text-transform: uppercase; text-decoration: none;
      font-size: 12px; font-weight: 700; letter-spacing: 2px;
      position: relative; overflow: hidden; transition: all 0.3s ease;
      cursor: pointer; width: 100%; border-radius: 4px;
    }
    .btn-glitch:hover { background: var(--accent); box-shadow: 0 0 25px var(--accent-glow); transform: translateY(-2px); }
    .btn-glitch:active { transform: scale(0.98); }
    
    .pulse-btn { animation: neon-pulse 3s infinite ease-in-out; }
    @keyframes neon-pulse { 
      0%, 100% { box-shadow: 0 0 10px rgba(255,0,76,0.3); } 
      50% { box-shadow: 0 0 25px rgba(255,0,76,0.6), 0 0 5px rgba(255,255,255,0.5); } 
    }
    
    .btn-secondary { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); margin-top: 10px; color: var(--text-gray); }
    .btn-secondary:hover { background: rgba(255,255,255,0.1); color: #fff; border-color: #fff; box-shadow: none; }

    /* --- ROSTER --- */
    .roster-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); gap: 15px; margin-top: 10px; }
    .player-wrapper { width: 100%; height: 320px; perspective: 1000px; cursor: pointer; }
    .player-card-inner { 
      position: relative; width: 100%; height: 100%; 
      transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1); transform-style: preserve-3d; 
    }
    .player-card-inner.is-flipped { transform: rotateY(180deg); }
    
    .player-front, .player-back {
      position: absolute; inset: 0; -webkit-backface-visibility: hidden; backface-visibility: hidden;
      border-radius: 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.08); 
      background: rgba(20,20,20,0.6); backdrop-filter: blur(8px);
    }
    .player-front { 
      padding: 15px; display: flex; flex-direction: column; justify-content: space-between; z-index: 2;
      background: linear-gradient(160deg, rgba(25,25,25,0.9) 0%, rgba(10,10,10,0.95) 100%);
    }
    .player-back { transform: rotateY(180deg); background: #000; }
    .player-back img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: 0.3s; }
    .player-wrapper:hover .player-back img { opacity: 1; scale: 1.05; }

    .p-nick { 
      font-size: 22px; font-weight: 700; margin: 0;
      background: linear-gradient(90deg, #fff, #bbb); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .p-role { color: var(--accent); font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; }
    .p-quote { font-style: italic; color: #777; font-size: 11px; line-height: 1.4; border-left: 2px solid var(--accent); padding-left: 8px; }

    .stats-grid {
      display: grid; grid-template-columns: 1fr 1fr; gap: 6px;
      margin-top: auto; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);
    }
    .stat-item {
      background: rgba(0,0,0,0.4); padding: 8px 4px; text-align: center;
      border-radius: 4px; transition: 0.2s; border: 1px solid transparent;
    }
    .stat-item:hover { border-color: var(--accent); background: rgba(255,0,76,0.05); }
    .stat-item.rank-full {
      grid-column: 1 / -1; 
      background: linear-gradient(90deg, rgba(0,0,0,0.6), rgba(0,204,255,0.15), rgba(0,0,0,0.6));
      border: 1px solid rgba(0,204,255,0.2); margin-bottom: 4px;
    }
    .stat-val { font-family: var(--font-tech); font-weight: 700; font-size: 14px; color: #fff; }
    .stat-label { font-size: 8px; color: #666; text-transform: uppercase; margin-top: 2px; }
    .s-kd { color: var(--success); } .s-hs { color: #ff0055; } .s-rnk { color: #00ccff; letter-spacing: 1px; }

    /* --- MISC --- */
    .donate-card { border: 1px dashed var(--accent); background: linear-gradient(45deg, rgba(255,0,76,0.05) 0%, transparent 100%); }
    .result-row { 
      display: flex; justify-content: space-between; align-items: center;
      font-size: 13px; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-family: var(--font-tech);
    }
    .result-row:last-child { border-bottom: none; }
    .res-win { color: var(--success); font-weight: 700; text-shadow: 0 0 10px rgba(0,255,163,0.3); }
    .res-lose { color: var(--accent); font-weight: 700; text-shadow: 0 0 10px rgba(255,0,76,0.3); }
    .loading-text { color: var(--text-gray); font-size: 12px; letter-spacing: 1px; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

    /* --- LIGHTBOX --- */
    .lightbox {
      position: fixed; inset: 0; background: rgba(0,0,0,0.95); 
      backdrop-filter: blur(10px); z-index: 2000; 
      display: none; flex-direction: column; align-items: center; justify-content: center;
      opacity: 0; transition: opacity 0.3s;
    }
    .lightbox.active { display: flex; opacity: 1; }
    .lightbox-img { max-width: 95%; max-height: 70vh; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); border: 1px solid #333; }
    .lightbox-nav { 
        position: absolute; color: #fff; font-size: 40px; cursor: pointer; padding: 20px; 
        opacity: 0.5; transition: 0.3s; top: 50%; transform: translateY(-50%); 
    }
    .lightbox-nav:hover { opacity: 1; color: var(--accent); text-shadow: 0 0 15px var(--accent); }
    .lb-prev { left: 10px; } .lb-next { right: 10px; }
    .lightbox-close { 
        position: absolute; top: 20px; right: 30px; font-size: 35px; cursor: pointer; color: #fff; opacity: 0.6; transition: 0.3s; 
    }
    .lightbox-close:hover { opacity: 1; color: var(--accent); transform: rotate(90deg); }
    .lightbox-caption { margin-top: 15px; color: #ccc; font-family: var(--font-tech); letter-spacing: 1px; font-size: 14px; }

    /* --- FORM --- */
    .form-group { margin-bottom: 15px; }
    .form-label { display: block; color: var(--accent); font-size: 11px; margin-bottom: 6px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
    .form-input {
      width: 100%; background: rgba(0, 0, 0, 0.4); border: 1px solid var(--glass-border);
      color: #fff; padding: 14px; border-radius: 8px; outline: none; transition: 0.3s; font-family: var(--font-main);
    }
    .form-input:focus { border-color: var(--accent); box-shadow: 0 0 15px rgba(255,0,76,0.15); background: rgba(10,10,10,0.8); }
    select.form-input { appearance: none; -webkit-appearance: none; }
  </style>

  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.addEventListener('keydown', function(e) {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) { e.preventDefault(); }
    });
  </script>
</head>
<body>

<div id="auth-barrier">
  <div class="auth-card">
    <div class="text-center" style="margin-bottom: 25px;">
        <div style="position: relative; display: inline-block;">
            <img src="https://i.postimg.cc/vTT1YfG7/IMG-20260103-235549-598.jpg" 
                 style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--accent); object-fit: cover; box-shadow: 0 0 20px var(--accent-glow);">
        </div>
        <h2 class="font-tech" style="font-size: 22px; margin-top: 15px; letter-spacing: 2px;">AIREX ACCESS</h2>
        <div style="font-size: 10px; opacity: 0.5; text-transform: uppercase;">–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞</div>
    </div>

    <div class="auth-tabs">
        <div class="auth-tab active" id="tab-login" onclick="window.switchAuth('login')">–í–•–û–î</div>
        <div class="auth-tab" id="tab-reg" onclick="window.switchAuth('reg')">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</div>
    </div>

    <form id="auth-form">
        <div class="form-group">
            <input type="email" id="auth-email" class="form-input" placeholder="Email" required>
        </div>
        <div class="form-group">
            <input type="password" id="auth-pass" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å" required minlength="6">
        </div>
        <button type="submit" id="auth-submit-btn" class="btn-glitch" style="margin-top: 10px; width: 100%;">
            –í–û–ô–¢–ò –í –°–ò–°–¢–ï–ú–£
        </button>
    </form>

    <div id="tg-auth-container" style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 15px;">
        </div>
  </div>
</div>

<div id="profile-modal" class="lightbox" style="display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.9);">
    <div class="card" style="max-width: 400px; width: 90%;">
        <h3 class="font-tech">–ù–ê–°–¢–†–û–ô–ö–ò –ê–ö–ö–ê–£–ù–¢–ê</h3>
        <div class="form-group">
            <label class="form-label">–ù–∏–∫–Ω–µ–π–º –≤ —Å–∏—Å—Ç–µ–º–µ</label>
            <input type="text" id="set-nick" class="form-input">
        </div>
        <div class="form-group">
            <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä (URL)</label>
            <input type="text" id="set-avatar" class="form-input">
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="window.saveProfile()" class="btn-glitch" style="flex: 1;">–°–û–•–†–ê–ù–ò–¢–¨</button>
            <button onclick="window.logout()" class="btn-glitch" style="flex: 1; background: #333;">–í–´–ô–¢–ò</button>
        </div>
        <button onclick="document.getElementById('profile-modal').style.display='none'" style="margin-top: 15px; background: none; border: none; color: #555; cursor: pointer; width: 100%;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<div class="bg-logo"></div>

<nav class="navbar">
    <div class="nav-brand">
      <img src="logo.png" alt="AX" onerror="this.style.display='none'"> 
      <h1>Airex<span style="color:var(--text-gray); font-weight:400;">Team</span></h1>
    </div>

    <div class="nav-controls">
        <div class="user-profile-nav" id="user-nav-btn" onclick="document.getElementById('profile-modal').style.display='flex'">
            <img src="" id="nav-avatar" class="user-avatar">
            <span id="nav-username" style="font-size: 12px; font-weight: bold;">User</span>
        </div>

        <button class="menu-toggle" id="menuBtn" onclick="toggleMenu()">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <div class="nav-dropdown" id="navDropdown">
      <button class="menu-item active-tab" onclick="selectTab('home', this)">
          <i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è
      </button>
      <button class="menu-item" onclick="selectTab('team', this)">
          <i class="fas fa-users"></i> –°–æ—Å—Ç–∞–≤
      </button>
      <button class="menu-item" onclick="selectTab('about', this)">
          <i class="fas fa-shield-alt"></i> –ò–Ω—Ñ–æ
      </button>
      <button class="menu-item" onclick="selectTab('news', this)">
          <i class="fas fa-bolt"></i> –ù–æ–≤–æ—Å—Ç–∏
      </button>
      <button class="menu-item" onclick="selectTab('media', this)">
          <i class="fas fa-play-circle"></i> –ú–µ–¥–∏–∞
      </button>
      <button class="menu-item" onclick="selectTab('history', this)">
          <i class="fas fa-trophy"></i> –ú–∞—Ç—á–∏
      </button>
      <button class="menu-item join-btn" onclick="selectTab('join', this)">
          <i class="fas fa-user-plus"></i> –í—Å—Ç—É–ø–∏—Ç—å
      </button>
    </div>
</nav>

<div class="container">

    <section id="home" class="active">
      <div class="card hero-card">
        <h2 class="glitch hero-title" data-text="AIREX TEAM">AIREX TEAM</h2>
        <p style="font-size: 16px; color: #ddd;">Professional Standoff 2 Esports Organization</p>
        <div id="typing-text"></div>
        <div style="margin-top: 25px;">
           <button class="btn-glitch" onclick="selectTab('join', document.querySelector('.join-btn'))">
             –°–¢–ê–¢–¨ –ß–ê–°–¢–¨–Æ –ö–û–ú–ê–ù–î–´ <i class="fas fa-chevron-right" style="margin-left:8px; font-size:10px;"></i>
           </button>
        </div>
      </div>

      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-val-main">0</div>
          <div class="stat-lbl">–¢—Ä–æ—Ñ–µ–µ–≤</div>
        </div>
        <div class="stat-card">
          <div id="win-rate-val" class="stat-val-main">0%</div>
          <div class="stat-lbl">Win Rate</div>
        </div>
      </div>

      <div class="card match-card">
        <div class="match-header">
          <span class="text-accent" style="font-weight:700;"><i class="fas fa-crosshairs"></i> NEXT MATCH</span>
          <span id="match-status" class="status-live">COUNTDOWN</span>
        </div>
        
        <div id="countdown" class="countdown">
          <div class="cd-item"><div id="days" class="cd-num">00</div><div class="cd-lbl">–î–ù</div></div>
          <div class="cd-num" style="color:var(--glass-border); font-weight:300;">:</div>
          <div class="cd-item"><div id="hours" class="cd-num">00</div><div class="cd-lbl">–ß–ê–°</div></div>
          <div class="cd-num" style="color:var(--glass-border); font-weight:300;">:</div>
          <div class="cd-item"><div id="minutes" class="cd-num">00</div><div class="cd-lbl">–ú–ò–ù</div></div>
          <div class="cd-num" style="color:var(--glass-border); font-weight:300;">:</div>
          <div class="cd-item"><div id="seconds" class="cd-num">00</div><div class="cd-lbl">–°–ï–ö</div></div>
        </div>

        <div class="match-teams">
          <div class="team-block">
             <div class="team-name">ARXtm</div>
             <div class="team-sub">Airex Team</div>
          </div>
          <div class="team-vs">VS</div>
          <div class="team-block">
            <div class="team-name" style="color:var(--text-gray);">RNFOR</div>
            <div class="team-sub">Opponent</div>
          </div>
        </div>
      </div> 
  
      <div class="card">
          <h3><i class="fab fa-telegram-plane text-accent" style="margin-right:8px;"></i> LIVE NEWS</h3>
          <div id="dynamic-tg-widget" style="min-height: 200px; display:flex; align-items:center; justify-content:center;">
             <span class="loading-text">CONNECTING TO HQ...</span>
          </div>
      </div>

     <div class="card donate-card text-center">
      <h3 style="font-size: 16px; margin-bottom: 8px;">–ü–û–î–î–ï–†–ñ–ö–ê –ö–û–ú–ê–ù–î–´</h3>
      <p style="font-size: 12px; margin-bottom: 20px;">–¢–≤–æ–π –≤–∫–ª–∞–¥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç –Ω–∞—Å –∫ –Ω–æ–≤—ã–º –ø–æ–±–µ–¥–∞–º.</p>
      <a href="https://dalink.to/airex_team" target="_blank" class="btn-glitch pulse-btn" style="border:none; background: var(--accent); width: auto; display: inline-flex;">
        <i class="fas fa-heart" style="font-size: 14px; margin-right: 8px;"></i> –û–¢–ü–†–ê–í–ò–¢–¨ –î–û–ù–ê–¢
      </a>
    </div>

    <div class="card">
      <h3><i class="fas fa-history text-accent" style="margin-right: 10px;"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã</h3>
      <div id="latest-results-container">
          <p class="text-center loading-text">–ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•...</p>
      </div>
      <button class="btn-glitch btn-secondary" onclick="selectTab('history', document.querySelectorAll('.menu-item')[5])">
        –í–°–Ø –ò–°–¢–û–†–ò–Ø
      </button>
    </div>
    </section>

    <section id="team">
      <div class="text-center" style="margin-bottom: 25px;">
        <h2 class="font-tech" style="text-shadow: 0 0 20px rgba(255,255,255,0.1);">MAIN ROSTER</h2>
        <p style="font-size: 12px; opacity: 0.6;">(–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç—É –∏–≥—Ä–æ–∫–∞)</p>
      </div>
      <div class="roster-grid" id="dynamic-roster"></div>
      <div class="text-center" style="margin-top: 50px; margin-bottom: 25px;">
        <h3 class="font-tech" style="opacity: 0.7; font-size: 18px;">RESERVE / ACADEMY</h3>
      </div>
      <div class="roster-grid" id="reserve-roster"></div>
    </section>

    <section id="about">
      <div class="card">
        <h3><i class="fas fa-shield-alt text-accent" style="margin-right:10px;"></i> –û –ù–ê–°</h3>
        <p>
          <strong style="color: #fff;">Airex Team</strong> ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–ª–∞–Ω, —ç—Ç–æ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞. 
          –ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, —Å—Ç—Ä–µ–º—è—â–∏—Ö—Å—è –∫ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –≤ Standoff 2. 
          –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞, —Ç–∞–∫—Ç–∏–∫–∞ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ ‚Äî –Ω–∞—à–∏ –≥–ª–∞–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã.
        </p>
        <p>–ú—ã —Å–æ–∑–¥–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∂–¥–æ–π –∏–≥—Ä–æ–π, –∫–∞–∂–¥—ã–º —Ç—É—Ä–Ω–∏—Ä–æ–º –∏ –∫–∞–∂–¥—ã–º —Ö–∞–π–ª–∞–π—Ç–æ–º.</p>
      </div>

      <div class="card text-center">
        <h3>–ù–ê–®–ò –†–ï–°–£–†–°–´</h3>
        <p style="font-size: 12px; margin-bottom: 20px;">–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è, —á—Ç–æ–±—ã —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–∞–º–∏ 24/7</p>
        
        <div class="social-row" style="display: flex; justify-content: center; gap: 25px; flex-wrap: wrap;">
          <a href="https://t.me/airex_team" target="_blank" class="social-icon si-tg"><i class="fab fa-telegram"></i></a>
          <a href="https://www.tiktok.com/@airex_team?_r=1&_t=ZS-92kyuwVYdaX" target="_blank" class="social-icon si-tt"><i class="fab fa-tiktok"></i></a>
          <a href="https://vk.ru/airex_team" target="_blank" class="social-icon si-vk"><i class="fab fa-vk"></i></a>
          <a href="https://youtube.com/@airex_team.official?si=Zpyt10GXVFQddMqp" target="_blank" class="social-icon si-yt"><i class="fab fa-youtube"></i></a>
          <a href="https://www.twitch.tv/airex_team" target="_blank" class="social-icon si-tw"><i class="fab fa-twitch"></i></a>
        </div>
        <style>
          .social-icon { 
            font-size: 24px; color: #fff; opacity: 0.6; transition: 0.3s; 
            width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; background: rgba(255,255,255,0.05); border: 1px solid transparent;
          }
          .social-icon:hover { opacity: 1; transform: translateY(-5px) scale(1.1); border-color: var(--accent); background: var(--accent-dim); box-shadow: 0 0 15px var(--accent-glow); }
        </style>
      </div>
    </section>

    <section id="news">
      <div style="margin-bottom: 20px;" class="text-center">
        <h2 class="font-tech">NEWS FEED</h2>
      </div>
      <div id="dynamic-news-container">
          <div class="card text-center">
              <span class="loading-text">–ó–ê–ì–†–£–ó–ö–ê –ù–û–í–û–°–¢–ï–ô...</span>
          </div>
      </div>
    </section>

    <section id="media">
        <div class="card">
          <h3>üì∏ –ì–ê–õ–ï–†–ï–Ø</h3>
          <p style="font-size: 12px;">–ú–æ–º–µ–Ω—Ç—ã —Å–ª–∞–≤—ã –∏ —Ä–∞–±–æ—á–∏–µ –±—É–¥–Ω–∏.</p>
          
          <div class="gallery-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 8px;">
            <div class="gallery-item" style="background-image: url('https://i.postimg.cc/X7JxT5Wp/IMG_20260103_231729_893.jpg');" data-src="https://i.postimg.cc/X7JxT5Wp/IMG_20260103_231729_893.jpg" data-caption="ACE by Nazzzy">
              <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
            </div>
            <div class="gallery-item" style="background-image: url('https://i.postimg.cc/VL643twC/IMG-20260103-231733-964.jpg');" data-src="https://i.postimg.cc/VL643twC/IMG-20260103-231733-964.jpg" data-caption="ACE by ToDay">
              <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
            </div>
            <div class="gallery-item" style="background-image: url('https://i.postimg.cc/DyZ5tGhs/IMG_20260103_231725_487.jpg');" data-src="https://i.postimg.cc/DyZ5tGhs/IMG_20260103_231725_487.jpg" data-caption="Win vs E0R Esports">
               <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
            </div>
            <div class="gallery-item" style="background-image: url('https://i.postimg.cc/653zDZK7/IMG_20260103_231815_987.jpg');" data-src="https://i.postimg.cc/653zDZK7/IMG_20260103_231815_987.jpg" data-caption="ApeX Star Champions">
               <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
            </div>
            <div class="gallery-item" style="background-image: url('https://i.postimg.cc/vTT1YfG7/IMG-20260103-235549-598.jpg'); background-position: top;" data-src="https://i.postimg.cc/vTT1YfG7/IMG-20260103-235549-598.jpg" data-caption="Main Roster 2026">
               <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
            </div>
          </div>
    
          <style>
            .gallery-item {
                height: 120px; background-size: cover; background-position: center; 
                border-radius: 8px; border: 1px solid var(--glass-border); 
                cursor: pointer; position: relative; overflow: hidden; transition: 0.3s;
            }
            .gallery-item:hover { border-color: var(--accent); transform: scale(1.02); }
            .gallery-overlay {
                position: absolute; inset: 0; background: rgba(0,0,0,0.5); 
                display: flex; align-items: center; justify-content: center;
                opacity: 0; transition: 0.3s; color: #fff; font-size: 20px;
            }
            .gallery-item:hover .gallery-overlay { opacity: 1; }
          </style>
        </div>
    
        <div class="card">
          <h3>üé• HIGHLIGHTS</h3>
          <div class="video-wrapper" data-video-id="Cq3ej9jtyIY" style="position: relative; width: 100%; aspect-ratio: 16/9; border-radius: 12px; overflow: hidden; border: 1px solid var(--glass-border); background: #000; cursor: pointer;">
            <div style="width:100%; height:100%; background: url('https://img.youtube.com/vi/Cq3ej9jtyIY/maxresdefault.jpg') center/cover; opacity: 0.8; transition: 0.3s;"></div>
            <div class="play-btn-overlay" style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;">
                <div style="width: 60px; height: 60px; background: rgba(255,0,76,0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; box-shadow: 0 0 20px var(--accent-glow);">‚ñ∂</div>
            </div>
          </div>
          <a href="https://youtube.com/@airex_team.official" target="_blank" class="btn-glitch btn-secondary" style="margin-top: 15px;">
            <i class="fab fa-youtube" style="margin-right: 8px;"></i> –ü–ï–†–ï–ô–¢–ò –ù–ê –ö–ê–ù–ê–õ
          </a>
        </div> 
    </section>

    <section id="join">
      <div class="card">
        <div class="text-center">
            <h3 style="font-size: 24px; margin-bottom: 5px;">JOIN AIREX</h3>
            <p style="font-size: 13px;">–ì–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–±—è? –ó–∞–ø–æ–ª–Ω–∏ –∞–Ω–∫–µ—Ç—É.</p>
        </div>
        
        <form onsubmit="sendToTelegram(event)" autocomplete="off" style="margin-top: 20px;">
          <div class="form-group">
            <label class="form-label">–ù–∏–∫–Ω–µ–π–º</label>
            <input type="text" id="nick" class="form-input" placeholder="–¢–≤–æ–π –Ω–∏–∫" required>
          </div>
          <div class="form-row" style="display: flex; gap: 15px;">
            <div class="form-group" style="flex: 1;">
              <label class="form-label">–í–æ–∑—Ä–∞—Å—Ç</label>
              <input type="number" id="age" class="form-input" placeholder="16" required>
            </div>
            <div class="form-group" style="flex: 1;">
              <label class="form-label">K/D (Ranked)</label>
              <input type="number" step="0.01" id="kd" class="form-input" placeholder="1.50" required>
            </div>
          </div> 
          <div class="form-group">
            <label class="form-label">–ñ–µ–ª–∞–µ–º–∞—è —Ä–æ–ª—å</label>
            <select id="role" class="form-input">
              <option value="–†–∏—Ñ–ª–µ—Ä">–†–∏—Ñ–ª–µ—Ä (Rifler)</option>
              <option value="–°–Ω–∞–π–ø–µ—Ä">–°–Ω–∞–π–ø–µ—Ä (AWP)</option>
              <option value="–ö–∞–ø–∏—Ç–∞–Ω">–ö–∞–ø–∏—Ç–∞–Ω (IGL)</option>
              <option value="–°–∞–ø–ø–æ—Ä—Ç">–°–∞–ø–ø–æ—Ä—Ç (Support)</option>
              <option value="–û–ø–µ–Ω-–§—Ä–∞–≥–µ—Ä">–≠–Ω—Ç—Ä–∏ (Entry)</option> 
              <option value="–õ—é–±–æ–π">–£–Ω–∏–≤–µ—Ä—Å–∞–ª</option> 
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">–ß–∞—Å–æ–≤ –≤ –∏–≥—Ä–µ</label>
            <input type="text" id="hours" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2500—á" required>
          </div>
          <div class="form-group">
            <label class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥</label>
            <input type="text" id="best_rank" class="form-input" placeholder="Elite / Master / Legend" required> 
          </div>
          
          <button type="submit" class="btn-glitch pulse-btn" style="margin-top: 20px; font-size: 14px;">
            –û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–Ø–í–ö–£ <i class="fas fa-paper-plane" style="margin-left: 10px;"></i>
          </button>
        </form>
      </div>
    </section>

    <section id="history">
        <div class="text-center" style="margin-bottom: 30px;">
          <h2 class="glitch hero-title" style="font-size: 28px;" data-text="MATCH HISTORY">MATCH HISTORY</h2>
          <p style="font-size: 12px; opacity: 0.6;">–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –Ω–∞—à–∏—Ö —Å—Ä–∞–∂–µ–Ω–∏–π</p>
        </div>
    
        <div id="full-history-container">
          <div class="text-center" style="padding: 40px;">
              <i class="fas fa-circle-notch fa-spin text-accent" style="font-size: 30px;"></i>
              <p style="margin-top: 15px; font-size: 12px;">–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –° –ë–ê–ó–û–ô...</p>
          </div>
        </div>
        
        <style>
            .history-card {
                background: rgba(20, 20, 20, 0.6);
                border: 1px solid var(--glass-border);
                border-radius: 12px; padding: 20px; margin-bottom: 12px;
                display: flex; align-items: center; justify-content: space-between;
                position: relative; overflow: hidden; backdrop-filter: blur(10px);
            }
            .history-card::before { content: ''; position: absolute; left: 0; top: 0; width: 4px; height: 100%; }
            .history-card.win-border::before { background: var(--success); box-shadow: 0 0 15px var(--success); }
            .history-card.lose-border::before { background: var(--accent); box-shadow: 0 0 15px var(--accent); }
            
            .h-opponent { font-family: var(--font-tech); font-size: 16px; color: #fff; font-weight: 700; }
            .h-tour { font-size: 9px; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; display: block; }
            .h-score { font-family: var(--font-tech); font-size: 20px; font-weight: 700; letter-spacing: 1px; }
            .h-status { font-size: 9px; text-transform: uppercase; font-weight: 800; margin-top: 5px; }
            .text-win { color: var(--success); } .text-lose { color: var(--accent); }
        </style>
    </section>

    <footer style="text-align: center; padding: 40px 20px; color: #444; font-size: 10px; font-family: var(--font-tech); text-transform: uppercase; border-top: 1px solid rgba(255,255,255,0.05); margin-top: 40px;">
        <p style="margin: 0;">¬© 2026 AIREX TEAM INC. ALL RIGHTS RESERVED.</p>
        <p style="margin: 5px 0 0 0; opacity: 0.5;">DESIGNED FOR CHAMPIONS</p>
    </footer>

</div> 

<div class="lightbox" id="lightbox">
    <div class="lightbox-close">&times;</div>
    <div class="lightbox-nav lb-prev">&#10094;</div>
    <div class="lightbox-nav lb-next">&#10095;</div>
    <img src="" class="lightbox-img" id="lightboxImg">
    <div class="lightbox-caption" id="lightboxCaption"></div>
</div>

<script>
    // Config
    const CONF = { 
        tg: { channel: 'airex_team', id: 638 }, 
        match: new Date("2026-01-07T18:00:00+03:00") // Will be updated by Firebase
    };

    // Utils
    const $ = (s) => document.querySelector(s);
    const $$ = (s) => document.querySelectorAll(s);

    // MENU & TABS SYSTEM
    function toggleMenu() {
      const menuBtn = document.getElementById('menuBtn');
      const dropdown = document.getElementById('navDropdown');
      menuBtn.classList.toggle('active');
      dropdown.classList.toggle('active');
      const icon = menuBtn.querySelector('i');
      icon.className = menuBtn.classList.contains('active') ? 'fas fa-times' : 'fas fa-bars';
    }

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      const dropdown = document.getElementById('navDropdown');
      const menuBtn = document.getElementById('menuBtn');
      if (dropdown && dropdown.classList.contains('active') && !dropdown.contains(e.target) && !menuBtn.contains(e.target)) {
        toggleMenu();
      }
    });

    window.selectTab = (id, btn) => {
      $$('section').forEach(s => {
          s.style.opacity = '0';
          s.style.transform = 'translateY(15px)';
          setTimeout(() => s.classList.remove('active'), 200);
      });
      
      setTimeout(() => {
          const target = $('#' + id);
          if(target) {
              target.classList.add('active');
              void target.offsetWidth; // force reflow
              target.style.opacity = '1';
              target.style.transform = 'translateY(0)';
          }
      }, 200);
      
      $$('.menu-item').forEach(b => b.classList.remove('active-tab'));
      if(btn) btn.classList.add('active-tab');
      
      const dropdown = document.getElementById('navDropdown');
      if (dropdown && dropdown.classList.contains('active')) toggleMenu();

      if (id !== 'media') {
        const v = $('.video-wrapper');
        if (v && v.dataset.loaded) {
          v.innerHTML = `<div style="width:100%; height:100%; background: url('https://img.youtube.com/vi/${v.dataset.videoId}/maxresdefault.jpg') center/cover; opacity: 0.8;"></div><div class="play-btn-overlay" style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;"><div style="width: 60px; height: 60px; background: rgba(255,0,76,0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">‚ñ∂</div></div>`;
          delete v.dataset.loaded;
        }
      }
      window.scrollTo({top: 0, behavior: 'smooth'});
    };

    // TELEGRAM WIDGET
    function loadTgWidget() {
      const c = $('#dynamic-tg-widget');
      if (!c) return;
      c.innerHTML = '';
      const s = document.createElement('script');
      s.src = 'https://telegram.org/js/telegram-widget.js?22';
      s.dataset.telegramPost = `${CONF.tg.channel}/${CONF.tg.id}`;
      s.dataset.width = '100%';
      s.dataset.color = 'E91E63';
      s.dataset.dark = '1';
      s.dataset.userpic = 'true';
      c.appendChild(s);
    }

    // COUNTDOWN
    function updateCountdown() {
      const diff = CONF.match - new Date();
      if (diff < 0) {
        if($('#countdown')) $('#countdown').innerHTML = "<div class='text-center' style='color:#00ff88; font-size:18px; font-weight:bold; animation: pulse 1s infinite;'>üü¢ LIVE MATCH IS ON</div>";
        if($('#match-status')) $('#match-status').innerText = "LIVE NOW";
        return;
      }
      const set = (id, v) => { if($('#'+id)) $('#'+id).innerText = Math.floor(v).toString().padStart(2, '0'); };
      set('days', diff / (864e5));
      set('hours', (diff % 864e5) / 36e5);
      set('minutes', (diff % 36e5) / 6e4);
      set('seconds', (diff % 6e4) / 1e3);
    }
    setInterval(updateCountdown, 1000);

    // TYPEWRITER
    let tIdx = 0; 
    const txt = "–°–æ–∑–¥–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é. –ü–æ–±–µ–∂–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ. Airex Team.";
    function typeW() {
      const el = $('#typing-text');
      if (el && tIdx < txt.length) { 
          el.innerHTML += txt.charAt(tIdx++); 
          setTimeout(typeW, 40); 
      }
    }

    // LIGHTBOX & INTERACTIVE
    document.addEventListener('DOMContentLoaded', () => {
      const lb = $('#lightbox'), lbImg = $('#lightboxImg'), lbCap = $('#lightboxCaption');
      let curIdx = 0;
      const items = Array.from($$('.gallery-item'));
      
      const updateLb = () => {
         if(!items[curIdx]) return;
         lbImg.src = items[curIdx].dataset.src;
         lbCap.innerText = items[curIdx].dataset.caption;
      };
      items.forEach((item, i) => {
        item.addEventListener('click', () => {
          curIdx = i; updateLb(); lb.classList.add('active'); 
          document.body.style.overflow = 'hidden'; 
        });
      });
      if($('.lightbox-close')) $('.lightbox-close').onclick = () => { lb.classList.remove('active'); document.body.style.overflow = ''; };
      if($('.lb-next')) $('.lb-next').onclick = (e) => { e.stopPropagation(); curIdx = (curIdx + 1) % items.length; updateLb(); };
      if($('.lb-prev')) $('.lb-prev').onclick = (e) => { e.stopPropagation(); curIdx = (curIdx - 1 + items.length) % items.length; updateLb(); };
      lb.onclick = (e) => { if(e.target === lb) $('.lightbox-close').click(); };

      // Video
      const videoWrap = $('.video-wrapper');
      if(videoWrap) {
        videoWrap.addEventListener('click', function() {
          if(this.dataset.loaded) return;
          this.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${this.dataset.videoId}?autoplay=1&rel=0" frameborder="0" allowfullscreen></iframe>`;
          this.dataset.loaded = true;
        });
      }

      window.flipCard = (el) => {
         const inner = el.querySelector('.player-card-inner');
         inner.classList.toggle('is-flipped');
      };

      setTimeout(typeW, 800);
      loadTgWidget();
      if(window.Telegram?.WebApp) window.Telegram.WebApp.expand();
    });

    // SEND FORM
    window.sendToTelegram = (e) => {
      e.preventDefault();
      const val = id => document.getElementById(id) ? document.getElementById(id).value : '‚Äî';
      
      const resumeText = 
`üöÄ –ó–ê–Ø–í–ö–ê –í AIREX
---------------------------
üë§ –ù–∏–∫: ${val('nick')}
üîû –í–æ–∑—Ä–∞—Å—Ç: ${val('age')}
üî´ –†–æ–ª—å: ${val('role')}
üìä K/D: ${val('kd')}
‚è≥ –ß–∞—Å–æ–≤: ${val('hours')}
üèÜ –†–∞–Ω–≥: ${val('best_rank')}
---------------------------
Sent via Official Site`;

      navigator.clipboard.writeText(resumeText).then(() => {
          const btn = e.target.querySelector('button');
          const oldText = btn.innerHTML;
          btn.innerHTML = "‚úÖ –°–ö–û–ü–ò–†–û–í–ê–ù–û!";
          btn.style.background = "#00ff88";
          btn.style.borderColor = "#00ff88";
          
          setTimeout(() => {
             alert("‚úÖ –ê–Ω–∫–µ—Ç—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ! –°–µ–π—á–∞—Å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≥—Ä—É–ø–ø–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ ¬´–í—Å—Ç–∞–≤–∏—Ç—å¬ª –∏ –æ—Ç–ø—Ä–∞–≤—å.");
             window.open("https://t.me/airex_invite", "_blank");
             btn.innerHTML = oldText;
             btn.style.background = "";
             btn.style.borderColor = "";
          }, 800);

      }).catch(err => {
          const encodedText = encodeURIComponent(resumeText);
          window.open(`https://t.me/share/url?url=https://t.me/Airex_invite&text=${encodedText}`, '_blank');
      });
    };
    
    // Setup TG Auth Placeholder
    function setupTG() {
        const container = document.getElementById('tg-auth-container');
        if(container) {
            container.innerHTML = `<div style="color: #54a9eb; font-size: 12px; cursor: pointer;" onclick="alert('–î–ª—è —Ä–∞–±–æ—Ç—ã Telegram Auth –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –¥–æ–º–µ–Ω –≤ BotFather')">
                <i class="fab fa-telegram"></i> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
            </div>`;
        }
    }
    setupTG();
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { 
    getAuth, 
    createUserWithEmailAndPassword, 
    signInWithEmailAndPassword, 
    onAuthStateChanged,
    signOut 
} from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
import { 
    getFirestore, 
    doc, 
    setDoc, 
    getDoc, 
    onSnapshot 
} from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

// --- CONFIG ---
const firebaseConfig = {
    apiKey: "AIzaSyDVFYaxAtzEi5zF8yi_ORJQYL66wQa-gpE", 
    authDomain: "airexsite.firebaseapp.com",
    projectId: "airexsite",
    storageBucket: "airexsite.firebasestorage.app",
    messagingSenderId: "276640665598",
    appId: "1:276640665598:web:d7400bd5962995efb43aaf"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore(app);

// --- AUTH LOGIC ---
let authMode = 'login';

window.switchAuth = (mode) => {
    authMode = mode;
    document.getElementById('tab-login').classList.toggle('active', mode === 'login');
    document.getElementById('tab-reg').classList.toggle('active', mode === 'reg');
    document.getElementById('auth-submit-btn').innerText = mode === 'login' ? '–í–û–ô–¢–ò –í –°–ò–°–¢–ï–ú–£' : '–°–û–ó–î–ê–¢–¨ –ê–ö–ö–ê–£–ù–¢';
};

const authForm = document.getElementById('auth-form');
if(authForm) {
    authForm.onsubmit = async (e) => {
        e.preventDefault();
        const email = document.getElementById('auth-email').value;
        const pass = document.getElementById('auth-pass').value;
        const btn = document.getElementById('auth-submit-btn');

        const originalText = btn.innerText;
        btn.innerText = "–û–ë–†–ê–ë–û–¢–ö–ê...";
        btn.disabled = true;

        try {
            if (authMode === 'reg') {
                const res = await createUserWithEmailAndPassword(auth, email, pass);
                // Create user profile
                await setDoc(doc(db, "users", res.user.uid), {
                    nick: email.split('@')[0],
                    avatar: "https://i.postimg.cc/vTT1YfG7/IMG-20260103-235549-598.jpg",
                    role: "Member",
                    createdAt: new Date().toISOString()
                });
                alert("–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω!");
            } else {
                await signInWithEmailAndPassword(auth, email, pass);
            }
        } catch (err) {
            let errorMsg = "–û—à–∏–±–∫–∞: " + err.message;
            if (err.code === 'auth/email-already-in-use') errorMsg = "Email —É–∂–µ –∑–∞–Ω—è—Ç";
            if (err.code === 'auth/weak-password') errorMsg = "–ü–∞—Ä–æ–ª—å —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ç–æ–π";
            if (err.code === 'auth/user-not-found' || err.code === 'auth/wrong-password') errorMsg = "–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ";
            alert(errorMsg);
        } finally {
            btn.disabled = false;
            btn.innerText = originalText;
        }
    };
}

onAuthStateChanged(auth, async (user) => {
    const barrier = document.getElementById('auth-barrier');
    const userNav = document.getElementById('user-nav-btn');

    if (user) {
        if(barrier) {
            barrier.style.opacity = '0';
            setTimeout(() => barrier.style.display = 'none', 500);
        }
        if(userNav) userNav.style.display = 'flex';
        
        const userDoc = await getDoc(doc(db, "users", user.uid));
        if (userDoc.exists()) {
            const data = userDoc.data();
            if(document.getElementById('nav-username')) document.getElementById('nav-username').innerText = data.nick;
            if(document.getElementById('nav-avatar')) document.getElementById('nav-avatar').src = data.avatar;
            if(document.getElementById('set-nick')) document.getElementById('set-nick').value = data.nick;
            if(document.getElementById('set-avatar')) document.getElementById('set-avatar').value = data.avatar;
        }
    } else {
        if(barrier) {
            barrier.style.display = 'flex';
            barrier.style.opacity = '1';
        }
        if(userNav) userNav.style.display = 'none';
    }
});

window.saveProfile = async () => {
    const user = auth.currentUser;
    if (!user) return;
    const newNick = document.getElementById('set-nick').value;
    const newAvatar = document.getElementById('set-avatar').value;
    try {
        await setDoc(doc(db, "users", user.uid), { nick: newNick, avatar: newAvatar }, { merge: true });
        if(document.getElementById('nav-username')) document.getElementById('nav-username').innerText = newNick;
        if(document.getElementById('nav-avatar')) document.getElementById('nav-avatar').src = newAvatar;
        alert("–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω!");
        document.getElementById('profile-modal').style.display = 'none';
    } catch (e) {
        alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è");
    }
};

window.logout = () => {
    signOut(auth);
    location.reload();
};

// --- DATA LISTENERS (Match, Roster, News, History) ---

const renderPlayer = (p) => {
    const kd = p.kd || (p.stats ? p.stats.kd : "0.00");
    const hs = p.hs || (p.stats ? p.stats.hs : "0%");
    const rank = p.rank || (p.stats ? p.stats.rank : "Unknown");
    const imgUrl = p.img || 'https://via.placeholder.com/300x400/000000/ffffff?text=No+Image';

    return `
    <div class="player-wrapper" onclick="flipCard(this)">
      <div class="player-card-inner">
        <div class="player-front">
          <div class="player-info-container" style="height:100%; display:flex; flex-direction:column;">
            <div>
              <h4 class="p-nick">${p.nick}</h4>
              <div class="p-role">${p.role}</div>
              <div class="p-quote">"${p.quote || 'Ready to win'}"</div>
            </div>
            <div class="stats-grid">
              <div class="stat-item rank-full">
                <div class="stat-val s-rnk">${rank}</div>
                <div class="stat-label">Rank</div>
              </div>
              <div class="stat-item">
                <div class="stat-val s-kd">${kd}</div>
                <div class="stat-label">K/D</div>
              </div>
              <div class="stat-item">
                <div class="stat-val s-hs">${hs}</div>
                <div class="stat-label">HS%</div>
              </div>
            </div>
          </div>
        </div>
        <div class="player-back">
          <img src="${imgUrl}" alt="${p.nick}" loading="lazy">
        </div>
      </div>
    </div>`;
};

// Match
onSnapshot(doc(db, "siteData", "match"), (docSnap) => {
    if(docSnap.exists()) {
        const data = docSnap.data();
        const enemyBlocks = document.querySelectorAll('.team-name');
        if(enemyBlocks.length > 1) enemyBlocks[1].innerText = data.enemy || "TBA";
        if(data.date) {
          let timeString = data.date;
          if (timeString.length === 16) timeString += ":00"; 
          window.CONF.match = new Date(timeString + "+03:00");
        }
    }
});

// Roster
onSnapshot(doc(db, "siteData", "roster"), (docSnap) => {
    const container = document.getElementById('dynamic-roster');
    if(docSnap.exists() && container) {
        const players = docSnap.data().list || [];
        container.innerHTML = players.map(p => renderPlayer(p)).join('');
    } else if (container) {
        container.innerHTML = '<div class="text-center" style="grid-column:1/-1; opacity:0.5;">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–∞–≤–∞...</div>';
    }
});

// Reserve
onSnapshot(doc(db, "siteData", "reserve"), (docSnap) => {
    const container = document.getElementById('reserve-roster');
    if(docSnap.exists() && container) {
        const players = docSnap.data().list || [];
        container.innerHTML = players.map(p => renderPlayer(p)).join('');
    }
});

// History
onSnapshot(doc(db, "siteData", "history"), (docSnap) => {
    if(docSnap.exists()) {
        const matches = docSnap.data().list || [];
        const fullHistory = document.getElementById('full-history-container');
        const latestWidget = document.getElementById('latest-results-container');
        const winRateEl = document.getElementById('win-rate-val'); 
        
        if(matches.length === 0) {
           if(fullHistory) fullHistory.innerHTML = "<p class='text-center'>–ù–µ—Ç —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π</p>";
           return;
        }

        const wins = matches.filter(m => parseInt(m.ourScore) > parseInt(m.enemyScore)).length;
        if(winRateEl) winRateEl.innerText = Math.round((wins / matches.length) * 100) + '%';

        const reversedMatches = [...matches].reverse();

        if(fullHistory) {
            fullHistory.innerHTML = reversedMatches.map(m => {
                const isWin = parseInt(m.ourScore) > parseInt(m.enemyScore);
                return `
                <div class="history-card ${isWin ? 'win-border' : 'lose-border'}">
                    <div class="h-info">
                        <span class="h-tour">${m.tournament || 'Showmatch'}</span>
                        <span class="h-opponent">vs ${m.enemy}</span>
                        ${m.screenshot ? `<button onclick="window.open('${m.screenshot}', '_blank')" class="btn-glitch" style="padding: 4px 8px; font-size: 8px; margin-top: 5px; width: auto; height: auto;">PROOF</button>` : ''}
                    </div>
                    <div class="h-result" style="text-align:right;">
                        <div class="h-score">${m.ourScore} : ${m.enemyScore}</div>
                        <div class="h-status ${isWin ? 'text-win' : 'text-lose'}">${isWin ? 'WIN' : 'LOSE'}</div>
                    </div>
                </div>`;
            }).join('');
        }

        if(latestWidget) {
            latestWidget.innerHTML = reversedMatches.slice(0, 3).map(m => {
                const isWin = parseInt(m.ourScore) > parseInt(m.enemyScore);
                return `
                <div class="result-row">
                    <span>vs ${m.enemy}</span>
                    <span class="${isWin ? 'res-win' : 'res-lose'}">${m.ourScore} : ${m.enemyScore}</span>
                </div>`;
            }).join('');
        }
    }
});

// News
onSnapshot(doc(db, "siteData", "news"), (docSnap) => {
    const container = document.getElementById('dynamic-news-container');
    if(docSnap.exists() && container) {
        const newsList = docSnap.data().list || [];
        if(newsList.length === 0) {
            container.innerHTML = '<div class="card text-center"><p>–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç.</p></div>';
            return;
        }
        container.innerHTML = newsList.map(item => `
          <div class="card">
              <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                 <span style="font-size: 10px; background: var(--accent); color: #fff; padding: 4px 8px; border-radius: 4px; font-weight: 700;">${item.tag || 'NEWS'}</span>
                 <span style="font-size: 10px; color: var(--text-gray);">${item.date || ''}</span>
              </div>
              <h3 style="margin-bottom: 10px;">${item.title}</h3>
              <p>${item.text}</p>
          </div>
        `).join('');
    }
});
</script>
</body>
</html>

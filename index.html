<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#050505">
  <meta name="description" content="Official Airex Team Esports Organization Site">
  <meta name="robots" content="index, follow">
  
  <title>AIREX TEAM | Official Site</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    /* --- CORE VARIABLES --- */
    :root {
      --accent: #ff004c; /* –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π, —è—Ä–∫–∏–π –Ω–µ–æ–Ω */
      --accent-dim: rgba(255, 0, 76, 0.15);
      --accent-glow: rgba(255, 0, 76, 0.6); 
      --bg-deep: #020202;
      --bg-panel: #0a0a0a;
      --glass-dark: rgba(12, 12, 12, 0.7);
      --glass-border: rgba(255, 255, 255, 0.06);
      --text-white: #ffffff;
      --text-gray: #a0a0a0;
      --success: #00ffa3;
      --font-main: 'Montserrat', sans-serif;
      --font-tech: 'Orbitron', sans-serif;
      --ease-out: cubic-bezier(0.23, 1, 0.32, 1);
    }

    /* --- RESET & BASE --- */
    html { scroll-behavior: smooth; }
    *, *::before, *::after { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    body {
      margin: 0; 
      background-color: var(--bg-deep);
      font-family: var(--font-main); 
      color: var(--text-white);
      min-height: 100vh; 
      overflow-x: hidden; 
      padding-top: 80px;
      /* Protection: Disable selection */
      user-select: none; 
      -webkit-user-select: none;
    }

    /* --- BACKGROUNDS --- */
    .bg-logo {
      position: fixed; top: 50%; left: 50%; 
      transform: translate(-50%, -50%);
      width: 80vw; height: 80vh;
      background: url('logo.png') center/contain no-repeat;
      opacity: 0.03; z-index: -1; 
      filter: grayscale(100%) brightness(2); 
      pointer-events: none;
    }
    
    .bg-noise {
      position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
      z-index: -1; pointer-events: none;
    }

    /* --- NAVIGATION --- */
    .navbar {
      position: fixed; top: 0; inset-inline: 0; height: 72px;
      background: rgba(2, 2, 2, 0.85); 
      backdrop-filter: blur(25px) saturate(180%); 
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      border-bottom: 1px solid var(--glass-border); 
      z-index: 1000;
      display: flex; align-items: center; 
      padding: 0 5%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    }
    
    .nav-brand { 
      display: flex; align-items: center; gap: 12px; 
      margin-right: 20px; flex-shrink: 0; 
    }
    .nav-brand img { 
      height: 40px; width: auto; 
      filter: drop-shadow(0 0 8px var(--accent-dim)); 
      transition: transform 0.3s var(--ease-out);
    }
    .nav-brand:hover img { transform: scale(1.05); }
    
    .nav-brand h1 {
      font-family: var(--font-tech); font-size: 18px; font-weight: 800; margin: 0;
      text-transform: uppercase; letter-spacing: 2px;
      background: linear-gradient(135deg, #fff 40%, #888);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    .nav-menu {
      display: flex; gap: 8px; overflow-x: auto; height: 100%; align-items: center;
      scrollbar-width: none; -ms-overflow-style: none; padding-right: 15px; mask-image: linear-gradient(90deg, transparent, #000 5%, #000 95%, transparent);
    }
    .nav-menu::-webkit-scrollbar { display: none; }
    
    .nav-btn {
      background: transparent; border: none; color: var(--text-gray);
      font-family: var(--font-tech); font-size: 11px; font-weight: 600;
      text-transform: uppercase; padding: 10px 16px; 
      cursor: pointer; transition: all 0.3s ease;
      white-space: nowrap; border-radius: 6px; letter-spacing: 1px;
      position: relative; overflow: hidden;
    }
    
    .nav-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
    
    .nav-btn.active {
      color: #fff; background: var(--accent-dim);
      box-shadow: 0 0 15px var(--accent-dim);
      border: 1px solid rgba(255, 0, 76, 0.3);
    }

    /* --- LAYOUT & ANIMATION --- */
    .container { max-width: 900px; margin: 0 auto; padding: 20px 15px; padding-bottom: 80px; }
    
    section { display: none; opacity: 0; transform: translateY(15px); transition: 0.5s var(--ease-out); }
    section.active { display: block; opacity: 1; transform: translateY(0); }

    /* --- CARDS & GLASS --- */
    .card {
      background: var(--glass-dark);
      border: 1px solid var(--glass-border);
      border-radius: 16px; padding: 24px; margin-bottom: 20px;
      position: relative; overflow: hidden;
      box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
      transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
    }
    
    /* Subtle hover effect for all cards */
    .card:hover { border-color: rgba(255,255,255,0.15); box-shadow: 0 15px 40px -10px rgba(0,0,0,0.7); }

    .card::before {
      content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      opacity: 0.6;
    }

    /* --- TYPOGRAPHY --- */
    h2, h3, h4 { font-family: var(--font-tech); color: #fff; margin: 0 0 15px 0; letter-spacing: 1px; text-transform: uppercase; }
    p { line-height: 1.7; color: var(--text-gray); font-size: 14px; margin-bottom: 15px; margin-top: 0; font-weight: 300; }
    .text-center { text-align: center; }
    .text-accent { color: var(--accent); }
    .font-tech { font-family: var(--font-tech); }

    /* --- HERO SECTION --- */
    .hero-card { 
      padding: 60px 20px; text-align: center; 
      background: radial-gradient(circle at center, rgba(255,0,76,0.08) 0%, rgba(10,10,10,0.8) 100%);
      border: 1px solid rgba(255,0,76,0.2);
    }
    .hero-title {
      font-size: 38px; font-weight: 900; margin-bottom: 15px;
      text-shadow: 0 0 30px var(--accent-glow);
      position: relative; display: inline-block;
      letter-spacing: 4px;
    }
    
    /* GLITCH EFFECT REFINED */
    .glitch { position: relative; color: white; }
    .glitch::before, .glitch::after {
      content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: var(--bg-deep); opacity: 0.8;
    }
    .glitch::before {
      left: 2px; text-shadow: -2px 0 #00ffff;
      clip: rect(24px, 550px, 90px, 0);
      animation: glitch-anim-2 3s infinite linear alternate-reverse;
    }
    .glitch::after {
      left: -2px; text-shadow: -2px 0 #ff004c;
      clip: rect(85px, 550px, 140px, 0);
      animation: glitch-anim-1 2.5s infinite linear alternate-reverse;
    }
    @keyframes glitch-anim-1 { 
      0% { clip: rect(20px, 9999px, 15px, 0); } 
      100% { clip: rect(50px, 9999px, 20px, 0); } 
    }
    @keyframes glitch-anim-2 { 
      0% { clip: rect(10px, 9999px, 80px, 0); } 
      100% { clip: rect(90px, 9999px, 10px, 0); } 
    }

    #typing-text {
      font-family: var(--font-tech); color: var(--text-gray);
      min-height: 40px; font-size: 13px; letter-spacing: 1px;
    }
    
    /* --- STATS GRID --- */
    .stats-row { 
      display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; 
    }
    .stat-card { 
      background: rgba(255, 255, 255, 0.02); 
      padding: 20px; text-align: center; 
      border-radius: 12px; border: 1px solid var(--glass-border);
      position: relative; overflow: hidden;
    }
    .stat-card::after {
      content: ''; position: absolute; inset: 0; border-radius: 12px;
      box-shadow: inset 0 0 20px rgba(255,0,76,0.05); pointer-events: none;
    }
    .stat-val-main { 
      font-family: var(--font-tech); color: var(--accent); 
      font-size: 28px; font-weight: 700; margin-bottom: 5px;
      text-shadow: 0 0 15px var(--accent-glow);
    }
    .stat-lbl { font-size: 11px; text-transform: uppercase; color: #666; font-weight: 600; letter-spacing: 1px; }

    /* --- MATCH CENTER --- */
    .match-card {
      border: 1px solid rgba(255, 0, 76, 0.3);
      background: linear-gradient(180deg, rgba(20,20,20,0.9) 0%, rgba(30,10,15,0.4) 100%);
    }
    .match-header { 
      display: flex; justify-content: space-between; align-items: center;
      font-size: 11px; font-family: var(--font-tech); margin-bottom: 20px; letter-spacing: 1px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px;
    }
    .status-live { 
      color: #00ff88; text-shadow: 0 0 10px rgba(0,255,136,0.4); 
      animation: blink 2s infinite; 
    }
    @keyframes blink { 50% { opacity: 0.5; } }

    .countdown { 
      display: flex; justify-content: center; align-items: flex-end; gap: 12px; 
      margin-bottom: 25px; font-family: var(--font-tech); 
    }
    .cd-item { text-align: center; width: 50px; }
    .cd-num { font-size: 26px; color: #fff; font-weight: 700; line-height: 1; }
    .cd-lbl { font-size: 9px; color: var(--accent); margin-top: 6px; font-weight: 600; }

    .match-teams { 
      display: flex; justify-content: space-between; align-items: center; 
      border-top: 1px solid var(--glass-border); padding-top: 20px; 
      position: relative;
    }
    .team-block { text-align: center; flex: 1; }
    .team-name { font-family: var(--font-tech); font-size: 20px; font-weight: 700; margin-bottom: 5px; }
    .team-sub { font-size: 10px; color: var(--text-gray); text-transform: uppercase; }
    
    .team-vs { 
      color: var(--accent); font-weight: 900; font-family: var(--font-tech); 
      font-size: 24px; font-style: italic; opacity: 0.8;
      position: absolute; left: 50%; transform: translateX(-50%); top: 20px;
    }

    /* --- BUTTONS --- */
    .btn-glitch {
      display: flex; align-items: center; justify-content: center;
      padding: 14px 28px; background: rgba(0,0,0,0.4);
      border: 1px solid var(--accent); color: #fff;
      font-family: var(--font-tech); text-transform: uppercase; text-decoration: none;
      font-size: 12px; font-weight: 700; letter-spacing: 2px;
      position: relative; overflow: hidden; transition: all 0.3s ease;
      cursor: pointer; width: 100%; border-radius: 4px;
    }
    .btn-glitch:hover { 
      background: var(--accent); 
      box-shadow: 0 0 25px var(--accent-glow); 
      transform: translateY(-2px);
    }
    .btn-glitch:active { transform: scale(0.98); }
    
    .pulse-btn { animation: neon-pulse 3s infinite ease-in-out; }
    @keyframes neon-pulse { 
      0%, 100% { box-shadow: 0 0 10px rgba(255,0,76,0.3); } 
      50% { box-shadow: 0 0 25px rgba(255,0,76,0.6), 0 0 5px rgba(255,255,255,0.5); } 
    }
    
    .btn-secondary {
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
      margin-top: 10px; color: var(--text-gray);
    }
    .btn-secondary:hover { background: rgba(255,255,255,0.1); color: #fff; border-color: #fff; box-shadow: none; }

    /* --- ROSTER 3D CARD --- */
    .roster-grid { 
      display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); 
      gap: 15px; margin-top: 10px;
    }
    .player-wrapper { 
      width: 100%; height: 320px; perspective: 1000px; cursor: pointer; 
    }
    .player-card-inner { 
      position: relative; width: 100%; height: 100%; 
      transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1); 
      transform-style: preserve-3d; 
    }
    .player-card-inner.is-flipped { transform: rotateY(180deg); }
    
    .player-front, .player-back {
      position: absolute; inset: 0; 
      -webkit-backface-visibility: hidden; backface-visibility: hidden;
      border-radius: 12px; overflow: hidden;
      border: 1px solid rgba(255,255,255,0.08); 
      background: rgba(20,20,20,0.6);
      backdrop-filter: blur(8px);
    }
    
    .player-front { 
      padding: 15px; display: flex; flex-direction: column; justify-content: space-between; z-index: 2;
      background: linear-gradient(160deg, rgba(25,25,25,0.9) 0%, rgba(10,10,10,0.95) 100%);
    }
    
    .player-back { 
      transform: rotateY(180deg); 
      background: #000;
    }
    .player-back img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: 0.3s; }
    .player-wrapper:hover .player-back img { opacity: 1; scale: 1.05; }

    /* Roster Info Styles */
    .p-nick { 
      font-size: 22px; font-weight: 700; margin: 0;
      background: linear-gradient(90deg, #fff, #bbb); 
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .p-role { 
      color: var(--accent); font-size: 10px; font-weight: 700;
      text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; 
    }
    .p-quote { 
      font-style: italic; color: #777; font-size: 11px; line-height: 1.4;
      border-left: 2px solid var(--accent); padding-left: 8px;
    }

    /* Player Stats Grid */
    .stats-grid {
      display: grid; grid-template-columns: 1fr 1fr; gap: 6px;
      margin-top: auto; padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .stat-item {
      background: rgba(0,0,0,0.4); padding: 8px 4px; text-align: center;
      border-radius: 4px; transition: 0.2s; border: 1px solid transparent;
    }
    .stat-item:hover { border-color: var(--accent); background: rgba(255,0,76,0.05); }
    
    .stat-item.rank-full {
      grid-column: 1 / -1; 
      background: linear-gradient(90deg, rgba(0,0,0,0.6), rgba(0,204,255,0.15), rgba(0,0,0,0.6));
      border: 1px solid rgba(0,204,255,0.2); margin-bottom: 4px;
    }
    .stat-val { font-family: var(--font-tech); font-weight: 700; font-size: 14px; color: #fff; }
    .stat-label { font-size: 8px; color: #666; text-transform: uppercase; margin-top: 2px; }
    
    .s-kd { color: var(--success); }
    .s-hs { color: #ff0055; }
    .s-rnk { color: #00ccff; letter-spacing: 1px; }

    /* --- SUPPORT / DONATE --- */
    .donate-card {
      border: 1px dashed var(--accent); 
      background: linear-gradient(45deg, rgba(255,0,76,0.05) 0%, transparent 100%);
    }
    .donate-icon { font-size: 16px; margin-right: 8px; }

    /* --- LATEST RESULTS --- */
    .result-row { 
      display: flex; justify-content: space-between; align-items: center;
      font-size: 13px; padding: 12px 0; 
      border-bottom: 1px solid rgba(255,255,255,0.05); 
      font-family: var(--font-tech);
    }
    .result-row:last-child { border-bottom: none; }
    .res-win { color: var(--success); font-weight: 700; text-shadow: 0 0 10px rgba(0,255,163,0.3); }
    .res-lose { color: var(--accent); font-weight: 700; text-shadow: 0 0 10px rgba(255,0,76,0.3); }

    /* --- UTILS --- */
    .loading-text { color: var(--text-gray); font-size: 12px; letter-spacing: 1px; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

  </style>

  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.addEventListener('keydown', function(e) {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
        e.preventDefault();
      }
    });
  </script>
</head>
<body>

  <div class="bg-logo"></div>
  <div class="bg-noise"></div>

  <nav class="navbar">
    <div class="nav-brand">
      <img src="logo.png" alt="AX" onerror="this.style.display='none'"> 
      <h1>Airex<span style="color:var(--text-gray); font-weight:400;">Team</span></h1>
    </div>
    <div class="nav-menu">
      <button class="nav-btn active" onclick="openTab('home', this)">–ì–ª–∞–≤–Ω–∞—è</button>
      <button class="nav-btn" onclick="openTab('team', this)">–°–æ—Å—Ç–∞–≤</button>
      <button class="nav-btn" onclick="openTab('about', this)">–ò–Ω—Ñ–æ</button>
      <button class="nav-btn" onclick="openTab('news', this)">–ù–æ–≤–æ—Å—Ç–∏</button>
      <button class="nav-btn" onclick="openTab('media', this)">–ú–µ–¥–∏–∞</button>
      <button class="nav-btn" onclick="openTab('history', this)">–ú–∞—Ç—á–∏</button>
      <button class="nav-btn" onclick="openTab('join', this)" style="color: var(--accent);">–í—Å—Ç—É–ø–∏—Ç—å</button>
    </div>
  </nav>

  <div class="container">

    <section id="home" class="active">
      
      <div class="card hero-card">
        <h2 class="glitch hero-title" data-text="AIREX TEAM">AIREX TEAM</h2>
        <p style="font-size: 16px; color: #ddd;">Professional Standoff 2 Esports Organization</p>
        <div id="typing-text"></div>
        <div style="margin-top: 25px;">
           <button class="btn-glitch" onclick="openTab('join', document.querySelectorAll('.nav-btn')[6])">
             –°–¢–ê–¢–¨ –ß–ê–°–¢–¨–Æ –ö–û–ú–ê–ù–î–´ <i class="fas fa-chevron-right" style="margin-left:8px; font-size:10px;"></i>
           </button>
        </div>
      </div>

      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-val-main">0</div>
          <div class="stat-lbl">–¢—Ä–æ—Ñ–µ–µ–≤</div>
        </div>
        <div class="stat-card">
          <div id="win-rate-val" class="stat-val-main">0%</div>
          <div class="stat-lbl">Win Rate</div>
        </div>
      </div>

      <div class="card match-card">
        <div class="match-header">
          <span class="text-accent" style="font-weight:700;"><i class="fas fa-crosshairs"></i> NEXT MATCH</span>
          <span id="match-status" class="status-live">COUNTDOWN</span>
        </div>
        
        <div id="countdown" class="countdown">
          <div class="cd-item"><div id="days" class="cd-num">00</div><div class="cd-lbl">–î–ù</div></div>
          <div class="cd-num" style="color:var(--glass-border); font-weight:300;">:</div>
          <div class="cd-item"><div id="hours" class="cd-num">00</div><div class="cd-lbl">–ß–ê–°</div></div>
          <div class="cd-num" style="color:var(--glass-border); font-weight:300;">:</div>
          <div class="cd-item"><div id="minutes" class="cd-num">00</div><div class="cd-lbl">–ú–ò–ù</div></div>
          <div class="cd-num" style="color:var(--glass-border); font-weight:300;">:</div>
          <div class="cd-item"><div id="seconds" class="cd-num">00</div><div class="cd-lbl">–°–ï–ö</div></div>
        </div>

        <div class="match-teams">
          <div class="team-block">
             <div class="team-name">ARXtm</div>
             <div class="team-sub">Airex Team</div>
          </div>
          <div class="team-vs">VS</div>
          <div class="team-block">
            <div class="team-name" style="color:var(--text-gray);">RNFOR</div>
            <div class="team-sub">Opponent</div>
          </div>
        </div>
      </div> 
  
      <div class="card">
          <h3><i class="fab fa-telegram-plane text-accent" style="margin-right:8px;"></i> LIVE NEWS</h3>
          <div id="dynamic-tg-widget" style="min-height: 200px; display:flex; align-items:center; justify-content:center;">
             <span class="loading-text">CONNECTING TO HQ...</span>
          </div>
      </div>

     <div class="card donate-card text-center">
      <h3 style="font-size: 16px; margin-bottom: 8px;">–ü–û–î–î–ï–†–ñ–ö–ê –ö–û–ú–ê–ù–î–´</h3>
      <p style="font-size: 12px; margin-bottom: 20px;">–¢–≤–æ–π –≤–∫–ª–∞–¥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç –Ω–∞—Å –∫ –Ω–æ–≤—ã–º –ø–æ–±–µ–¥–∞–º –∏ —Ç—É—Ä–Ω–∏—Ä–∞–º.</p>
      
      <a href="https://dalink.to/airex_team" target="_blank" class="btn-glitch pulse-btn" style="border:none; background: var(--accent);">
        <i class="fas fa-heart donate-icon"></i> –û–¢–ü–†–ê–í–ò–¢–¨ –î–û–ù–ê–¢
      </a>
    </div>

    <div class="card">
      <h3><i class="fas fa-history text-accent" style="margin-right: 10px;"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã</h3>
      <div id="latest-results-container">
          <p class="text-center loading-text">–ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•...</p>
      </div>
      <button class="btn-glitch btn-secondary" onclick="openTab('history', document.querySelectorAll('.nav-btn')[5])">
        –í–°–Ø –ò–°–¢–û–†–ò–Ø
      </button>
    </div>

    </section>

    <section id="team">
      <div class="text-center" style="margin-bottom: 25px;">
        <h2 class="font-tech" style="text-shadow: 0 0 20px rgba(255,255,255,0.1);">MAIN ROSTER</h2>
        <p style="font-size: 12px; opacity: 0.6;">(–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç—É –∏–≥—Ä–æ–∫–∞)</p>
      </div>
      
      <div class="roster-grid" id="dynamic-roster">
        </div>

      <div class="text-center" style="margin-top: 50px; margin-bottom: 25px;">
        <h3 class="font-tech" style="opacity: 0.7; font-size: 18px;">RESERVE / ACADEMY</h3>
      </div>

      <div class="roster-grid" id="reserve-roster">
         </div>
</section>
    <section id="about">
      <div class="card">
        <h3><i class="fas fa-shield-alt text-accent" style="margin-right:10px;"></i> –û –ù–ê–°</h3>
        <p>
          <strong style="color: #fff;">Airex Team</strong> ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–ª–∞–Ω, —ç—Ç–æ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞. 
          –ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, —Å—Ç—Ä–µ–º—è—â–∏—Ö—Å—è –∫ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –≤ Standoff 2. 
          –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞, —Ç–∞–∫—Ç–∏–∫–∞ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ ‚Äî –Ω–∞—à–∏ –≥–ª–∞–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã.
        </p>
        <p>–ú—ã —Å–æ–∑–¥–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∂–¥–æ–π –∏–≥—Ä–æ–π, –∫–∞–∂–¥—ã–º —Ç—É—Ä–Ω–∏—Ä–æ–º –∏ –∫–∞–∂–¥—ã–º —Ö–∞–π–ª–∞–π—Ç–æ–º.</p>
      </div>

      <div class="card text-center">
        <h3>–ù–ê–®–ò –†–ï–°–£–†–°–´</h3>
        <p style="font-size: 12px; margin-bottom: 20px;">–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è, —á—Ç–æ–±—ã —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–∞–º–∏ 24/7</p>
        
        <div class="social-row" style="display: flex; justify-content: center; gap: 25px; flex-wrap: wrap;">
          <a href="https://t.me/airex_team" target="_blank" class="social-icon si-tg"><i class="fab fa-telegram"></i></a>
          <a href="https://www.tiktok.com/@airex_team?_r=1&_t=ZS-92kyuwVYdaX" target="_blank" class="social-icon si-tt"><i class="fab fa-tiktok"></i></a>
          <a href="https://vk.ru/airex_team" target="_blank" class="social-icon si-vk"><i class="fab fa-vk"></i></a>
          <a href="https://youtube.com/@airex_team.official?si=Zpyt10GXVFQddMqp" target="_blank" class="social-icon si-yt"><i class="fab fa-youtube"></i></a>
          <a href="https://www.twitch.tv/airex_team" target="_blank" class="social-icon si-tw"><i class="fab fa-twitch"></i></a>
        </div>

        <style>
          .social-icon { 
            font-size: 24px; color: #fff; opacity: 0.6; transition: 0.3s; 
            width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; background: rgba(255,255,255,0.05); border: 1px solid transparent;
          }
          .social-icon:hover { opacity: 1; transform: translateY(-5px) scale(1.1); border-color: var(--accent); background: var(--accent-dim); box-shadow: 0 0 15px var(--accent-glow); }
        </style>
      </div>
    </section>
    <section id="news">
      <div style="margin-bottom: 20px;" class="text-center">
        <h2 class="font-tech">NEWS FEED</h2>
      </div>
      
      <div id="dynamic-news-container">
          <div class="card text-center">
              <span class="loading-text">–ó–ê–ì–†–£–ó–ö–ê –ù–û–í–û–°–¢–ï–ô...</span>
          </div>
      </div>
    </section>

   <section id="media">
    <div class="card">
      <h3>üì∏ –ì–ê–õ–ï–†–ï–Ø</h3>
      <p style="font-size: 12px;">–ú–æ–º–µ–Ω—Ç—ã —Å–ª–∞–≤—ã –∏ —Ä–∞–±–æ—á–∏–µ –±—É–¥–Ω–∏.</p>
      
      <div class="gallery-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 8px;">
        <div class="gallery-item" style="background-image: url('https://i.postimg.cc/X7JxT5Wp/IMG_20260103_231729_893.jpg');" data-src="https://i.postimg.cc/X7JxT5Wp/IMG_20260103_231729_893.jpg" data-caption="ACE by Nazzzy">
          <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
        </div>
        <div class="gallery-item" style="background-image: url('https://i.postimg.cc/VL643twC/IMG-20260103-231733-964.jpg');" data-src="https://i.postimg.cc/VL643twC/IMG-20260103-231733-964.jpg" data-caption="ACE by ToDay">
          <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
        </div>
        <div class="gallery-item" style="background-image: url('https://i.postimg.cc/DyZ5tGhs/IMG_20260103_231725_487.jpg');" data-src="https://i.postimg.cc/DyZ5tGhs/IMG_20260103_231725_487.jpg" data-caption="Win vs E0R Esports">
           <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
        </div>
        <div class="gallery-item" style="background-image: url('https://i.postimg.cc/653zDZK7/IMG_20260103_231815_987.jpg');" data-src="https://i.postimg.cc/653zDZK7/IMG_20260103_231815_987.jpg" data-caption="ApeX Star Champions">
           <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
        </div>
        <div class="gallery-item" style="background-image: url('https://i.postimg.cc/vTT1YfG7/IMG-20260103-235549-598.jpg'); background-position: top;" data-src="https://i.postimg.cc/vTT1YfG7/IMG-20260103-235549-598.jpg" data-caption="Main Roster 2026">
           <div class="gallery-overlay"><i class="fas fa-search-plus"></i></div>
        </div>
      </div>

      <style>
        .gallery-item {
            height: 120px; background-size: cover; background-position: center; 
            border-radius: 8px; border: 1px solid var(--glass-border); 
            cursor: pointer; position: relative; overflow: hidden; transition: 0.3s;
        }
        .gallery-item:hover { border-color: var(--accent); transform: scale(1.02); }
        .gallery-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.5); 
            display: flex; align-items: center; justify-content: center;
            opacity: 0; transition: 0.3s; color: #fff; font-size: 20px;
        }
        .gallery-item:hover .gallery-overlay { opacity: 1; }
      </style>
    </div>

    <div class="card">
      <h3>üé• HIGHLIGHTS</h3>
      <div class="video-wrapper" data-video-id="Cq3ej9jtyIY" style="position: relative; width: 100%; aspect-ratio: 16/9; border-radius: 12px; overflow: hidden; border: 1px solid var(--glass-border); background: #000; cursor: pointer;">
        <div style="width:100%; height:100%; background: url('https://img.youtube.com/vi/Cq3ej9jtyIY/maxresdefault.jpg') center/cover; opacity: 0.8; transition: 0.3s;"></div>
        <div class="play-btn-overlay" style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;">
            <div style="width: 60px; height: 60px; background: rgba(255,0,76,0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; box-shadow: 0 0 20px var(--accent-glow);">‚ñ∂</div>
        </div>
      </div>
      <a href="https://youtube.com/@airex_team.official" target="_blank" class="btn-glitch btn-secondary" style="margin-top: 15px;">
        <i class="fab fa-youtube" style="margin-right: 8px;"></i> –ü–ï–†–ï–ô–¢–ò –ù–ê –ö–ê–ù–ê–õ
      </a>
    </div> 
  </section>

  <section id="join">
      <div class="card">
        <div class="text-center">
            <h3 style="font-size: 24px; margin-bottom: 5px;">JOIN AIREX</h3>
            <p style="font-size: 13px;">–ì–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–±—è? –ó–∞–ø–æ–ª–Ω–∏ –∞–Ω–∫–µ—Ç—É.</p>
        </div>
        
        <form onsubmit="sendToTelegram(event)" autocomplete="off" style="margin-top: 20px;">
          <div class="form-group">
            <label class="form-label">–ù–∏–∫–Ω–µ–π–º</label>
            <input type="text" id="nick" class="form-input" placeholder="–¢–≤–æ–π –Ω–∏–∫" required>
          </div>
          <div class="form-row" style="display: flex; gap: 15px;">
            <div class="form-group" style="flex: 1;">
              <label class="form-label">–í–æ–∑—Ä–∞—Å—Ç</label>
              <input type="number" id="age" class="form-input" placeholder="16" required>
            </div>
            <div class="form-group" style="flex: 1;">
              <label class="form-label">K/D (Ranked)</label>
              <input type="number" step="0.01" id="kd" class="form-input" placeholder="1.50" required>
            </div>
          </div> 
          <div class="form-group">
            <label class="form-label">–ñ–µ–ª–∞–µ–º–∞—è —Ä–æ–ª—å</label>
            <select id="role" class="form-input">
              <option value="–†–∏—Ñ–ª–µ—Ä">–†–∏—Ñ–ª–µ—Ä (Rifler)</option>
              <option value="–°–Ω–∞–π–ø–µ—Ä">–°–Ω–∞–π–ø–µ—Ä (AWP)</option>
              <option value="–ö–∞–ø–∏—Ç–∞–Ω">–ö–∞–ø–∏—Ç–∞–Ω (IGL)</option>
              <option value="–°–∞–ø–ø–æ—Ä—Ç">–°–∞–ø–ø–æ—Ä—Ç (Support)</option>
              <option value="–û–ø–µ–Ω-–§—Ä–∞–≥–µ—Ä">–≠–Ω—Ç—Ä–∏ (Entry)</option> 
              <option value="–õ—é–±–æ–π">–£–Ω–∏–≤–µ—Ä—Å–∞–ª</option> 
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">–ß–∞—Å–æ–≤ –≤ –∏–≥—Ä–µ</label>
            <input type="text" id="hours" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2500—á" required>
          </div>
          <div class="form-group">
            <label class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥</label>
            <input type="text" id="best_rank" class="form-input" placeholder="Elite / Master / Legend" required> 
          </div>
          
          <button type="submit" class="btn-glitch pulse-btn" style="margin-top: 20px; font-size: 14px;">
            –û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–Ø–í–ö–£ <i class="fas fa-paper-plane" style="margin-left: 10px;"></i>
          </button>
        </form>
      </div>

      <style>
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; color: var(--accent); font-size: 11px; margin-bottom: 6px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .form-input {
          width: 100%; background: rgba(0, 0, 0, 0.4); 
          border: 1px solid var(--glass-border);
          color: #fff; padding: 14px; border-radius: 8px; 
          outline: none; transition: 0.3s; font-family: var(--font-main);
        }
        .form-input:focus { border-color: var(--accent); box-shadow: 0 0 15px rgba(255,0,76,0.15); background: rgba(10,10,10,0.8); }
        select.form-input { appearance: none; -webkit-appearance: none; }
      </style>
    </section>

  <section id="history">
    <div class="text-center" style="margin-bottom: 30px;">
      <h2 class="glitch hero-title" style="font-size: 28px;" data-text="MATCH HISTORY">MATCH HISTORY</h2>
      <p style="font-size: 12px; opacity: 0.6;">–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –Ω–∞—à–∏—Ö —Å—Ä–∞–∂–µ–Ω–∏–π</p>
    </div>

    <div id="full-history-container">
      <div class="text-center" style="padding: 40px;">
          <i class="fas fa-circle-notch fa-spin text-accent" style="font-size: 30px;"></i>
          <p style="margin-top: 15px; font-size: 12px;">–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –° –ë–ê–ó–û–ô...</p>
      </div>
    </div>
    
    <style>
        .history-card {
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid var(--glass-border);
            border-radius: 12px; padding: 20px; margin-bottom: 12px;
            display: flex; align-items: center; justify-content: space-between;
            position: relative; overflow: hidden; backdrop-filter: blur(10px);
        }
        .history-card::before {
            content: ''; position: absolute; left: 0; top: 0; width: 4px; height: 100%;
        }
        .history-card.win-border::before { background: var(--success); box-shadow: 0 0 15px var(--success); }
        .history-card.lose-border::before { background: var(--accent); box-shadow: 0 0 15px var(--accent); }
        
        .h-opponent { font-family: var(--font-tech); font-size: 16px; color: #fff; font-weight: 700; }
        .h-tour { font-size: 9px; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; display: block; }
        .h-score { font-family: var(--font-tech); font-size: 20px; font-weight: 700; letter-spacing: 1px; }
        .h-status { font-size: 9px; text-transform: uppercase; font-weight: 800; margin-top: 5px; }
        .text-win { color: var(--success); }
        .text-lose { color: var(--accent); }
    </style>

  <footer style="text-align: center; padding: 40px 20px; color: #444; font-size: 10px; font-family: var(--font-tech); text-transform: uppercase; border-top: 1px solid rgba(255,255,255,0.05); margin-top: 40px;">
    <p style="margin: 0;">¬© 2026 AIREX TEAM INC. ALL RIGHTS RESERVED.</p>
    <p style="margin: 5px 0 0 0; opacity: 0.5;">DESIGNED FOR CHAMPIONS</p>
  </footer>

  </div> <div class="lightbox" id="lightbox">
    <div class="lightbox-close">&times;</div>
    <div class="lightbox-nav lb-prev">&#10094;</div>
    <div class="lightbox-nav lb-next">&#10095;</div>
    <img src="" class="lightbox-img" id="lightboxImg">
    <div class="lightbox-caption" id="lightboxCaption"></div>
  </div>

  <style>
    .lightbox {
      position: fixed; inset: 0; background: rgba(0,0,0,0.95); 
      backdrop-filter: blur(10px); z-index: 2000; 
      display: none; flex-direction: column; align-items: center; justify-content: center;
      opacity: 0; transition: opacity 0.3s;
    }
    .lightbox.active { display: flex; opacity: 1; }
    .lightbox-img { max-width: 95%; max-height: 70vh; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); border: 1px solid #333; }
    .lightbox-nav { 
        position: absolute; color: #fff; font-size: 40px; cursor: pointer; padding: 20px; 
        opacity: 0.5; transition: 0.3s; top: 50%; transform: translateY(-50%); 
    }
    .lightbox-nav:hover { opacity: 1; color: var(--accent); text-shadow: 0 0 15px var(--accent); }
    .lb-prev { left: 10px; } .lb-next { right: 10px; }
    .lightbox-close { 
        position: absolute; top: 20px; right: 30px; font-size: 35px; cursor: pointer; color: #fff; opacity: 0.6; transition: 0.3s; 
    }
    .lightbox-close:hover { opacity: 1; color: var(--accent); transform: rotate(90deg); }
    .lightbox-caption { margin-top: 15px; color: #ccc; font-family: var(--font-tech); letter-spacing: 1px; font-size: 14px; }
  </style>

  <script>
    // --- CONFIGURATION ---
    const CONF = { 
        tg: { channel: 'airex_team', id: 638 }, 
        // –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (–±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∞ Firebase)
        match: new Date("2026-01-07T18:00:00+03:00") 
    };

    // --- UTILS ---
    const $ = (s) => document.querySelector(s);
    const $$ = (s) => document.querySelectorAll(s);

    // 1. TABS SYSTEM (Optimized)
    window.openTab = (id, btn) => {
      // –°–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π
      $$('section').forEach(s => {
          s.style.opacity = '0';
          s.style.transform = 'translateY(15px)';
          setTimeout(() => s.classList.remove('active'), 200);
      });
      
      // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω—É–∂–Ω–æ–π —Å–µ–∫—Ü–∏–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
      setTimeout(() => {
          const target = $('#' + id);
          if(target) {
              target.classList.add('active');
              // Force reflow
              void target.offsetWidth;
              target.style.opacity = '1';
              target.style.transform = 'translateY(0)';
          }
      }, 200);
      
      // –ö–Ω–æ–ø–∫–∏
      $$('.nav-btn').forEach(b => b.classList.remove('active'));
      if(btn) btn.classList.add('active');
      
      // Stop Video Logic
      if (id !== 'media') {
        const v = $('.video-wrapper');
        if (v && v.dataset.loaded) {
          v.innerHTML = `<div style="width:100%; height:100%; background: url('https://img.youtube.com/vi/${v.dataset.videoId}/maxresdefault.jpg') center/cover; opacity: 0.8;"></div><div class="play-btn-overlay" style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;"><div style="width: 60px; height: 60px; background: rgba(255,0,76,0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">‚ñ∂</div></div>`;
          delete v.dataset.loaded;
        }
      }
      // Scroll to top
      window.scrollTo({top: 0, behavior: 'smooth'});
    };

    // 2. TELEGRAM WIDGET
    function loadTgWidget() {
      const c = $('#dynamic-tg-widget');
      if (!c) return;
      c.innerHTML = '';
      const s = document.createElement('script');
      s.src = 'https://telegram.org/js/telegram-widget.js?22';
      s.dataset.telegramPost = `${CONF.tg.channel}/${CONF.tg.id}`;
      s.dataset.width = '100%';
      s.dataset.color = 'E91E63'; // Fallback color
      s.dataset.dark = '1';
      s.dataset.userpic = 'true';
      c.appendChild(s);
    }

    // 3. COUNTDOWN TIMER
    function updateCountdown() {
      const diff = CONF.match - new Date();
      if (diff < 0) {
        if($('#countdown')) $('#countdown').innerHTML = "<div class='text-center' style='color:#00ff88; font-size:18px; font-weight:bold; animation: pulse 1s infinite;'>üü¢ LIVE MATCH IS ON</div>";
        if($('#match-status')) $('#match-status').innerText = "LIVE NOW";
        return;
      }
      
      const set = (id, v) => { if($('#'+id)) $('#'+id).innerText = Math.floor(v).toString().padStart(2, '0'); };
      set('days', diff / (864e5));
      set('hours', (diff % 864e5) / 36e5);
      set('minutes', (diff % 36e5) / 6e4);
      set('seconds', (diff % 6e4) / 1e3);
    }
    setInterval(updateCountdown, 1000);

    // 4. TYPEWRITER EFFECT
    let tIdx = 0; 
    const txt = "–°–æ–∑–¥–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é. –ü–æ–±–µ–∂–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ. Airex Team.";
    function typeW() {
      const el = $('#typing-text');
      if (el && tIdx < txt.length) { 
          el.innerHTML += txt.charAt(tIdx++); 
          setTimeout(typeW, 40); 
      }
    }

    // 5. LIGHTBOX & INTERACTIVE
    document.addEventListener('DOMContentLoaded', () => {
      // Lightbox Logic
      const lb = $('#lightbox'), lbImg = $('#lightboxImg'), lbCap = $('#lightboxCaption');
      let curIdx = 0;
      const items = Array.from($$('.gallery-item'));
      
      const updateLb = () => {
         if(!items[curIdx]) return;
         lbImg.src = items[curIdx].dataset.src;
         lbCap.innerText = items[curIdx].dataset.caption;
      };

      items.forEach((item, i) => {
        item.addEventListener('click', () => {
          curIdx = i; updateLb(); lb.classList.add('active'); 
          document.body.style.overflow = 'hidden'; // Block scroll
        });
      });

      // Controls
      $('.lightbox-close').onclick = () => { lb.classList.remove('active'); document.body.style.overflow = ''; };
      $('.lb-next').onclick = (e) => { e.stopPropagation(); curIdx = (curIdx + 1) % items.length; updateLb(); };
      $('.lb-prev').onclick = (e) => { e.stopPropagation(); curIdx = (curIdx - 1 + items.length) % items.length; updateLb(); };
      lb.onclick = (e) => { if(e.target === lb) $('.lightbox-close').click(); };

      // Video Click
      const videoWrap = $('.video-wrapper');
      if(videoWrap) {
        videoWrap.addEventListener('click', function() {
          if(this.dataset.loaded) return;
          this.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${this.dataset.videoId}?autoplay=1&rel=0" frameborder="0" allowfullscreen></iframe>`;
          this.dataset.loaded = true;
        });
      }

      // 3D Card Flip
      window.flipCard = (el) => {
         const inner = el.querySelector('.player-card-inner');
         inner.classList.toggle('is-flipped');
      };

      // Init
      setTimeout(typeW, 800);
      loadTgWidget();
      if(window.Telegram?.WebApp) window.Telegram.WebApp.expand();
    });

    // 6. FORM LOGIC (Resume Sender)
    window.sendToTelegram = (e) => {
      e.preventDefault();
      const val = id => document.getElementById(id) ? document.getElementById(id).value : '‚Äî';
      
      const resumeText = 
`üöÄ –ó–ê–Ø–í–ö–ê –í AIREX
---------------------------
üë§ –ù–∏–∫: ${val('nick')}
üîû –í–æ–∑—Ä–∞—Å—Ç: ${val('age')}
üî´ –†–æ–ª—å: ${val('role')}
üìä K/D: ${val('kd')}
‚è≥ –ß–∞—Å–æ–≤: ${val('hours')}
üèÜ –†–∞–Ω–≥: ${val('best_rank')}
---------------------------
Sent via Official Site`;

      navigator.clipboard.writeText(resumeText).then(() => {
          // Visual Feedback
          const btn = e.target.querySelector('button');
          const oldText = btn.innerHTML;
          btn.innerHTML = "‚úÖ –°–ö–û–ü–ò–†–û–í–ê–ù–û!";
          btn.style.background = "#00ff88";
          btn.style.borderColor = "#00ff88";
          
          setTimeout(() => {
             alert("‚úÖ –ê–Ω–∫–µ—Ç—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ! –°–µ–π—á–∞—Å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≥—Ä—É–ø–ø–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ ¬´–í—Å—Ç–∞–≤–∏—Ç—å¬ª –∏ –æ—Ç–ø—Ä–∞–≤—å.");
             window.open("https://t.me/@kas_0ff", "_blank");
             btn.innerHTML = oldText;
             btn.style.background = "";
             btn.style.borderColor = "";
          }, 800);

      }).catch(err => {
          const encodedText = encodeURIComponent(resumeText);
          window.open(`https://t.me/share/url?url=https://t.me/Airex_invite&text=${encodedText}`, '_blank');
      });
    };
  </script>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

  // YOUR CONFIG
  const firebaseConfig = {
      apiKey: "AIzaSyDVFYaxAtzEi5zF8yi_ORJQYL66wQa-gpE", 
      authDomain: "airexsite.firebaseapp.com",
      projectId: "airexsite",
      storageBucket: "airexsite.firebasestorage.app",
      messagingSenderId: "276640665598",
      appId: "1:276640665598:web:d7400bd5962995efb43aaf"
  };

  // Init
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Helper for generating player cards
  const renderPlayer = (p) => {
      const kd = p.kd || (p.stats ? p.stats.kd : "0.00");
      const hs = p.hs || (p.stats ? p.stats.hs : "0%");
      const rank = p.rank || (p.stats ? p.stats.rank : "Unknown");
      // Fallback image if broken
      const imgUrl = p.img || 'https://via.placeholder.com/300x400/000000/ffffff?text=No+Image';

      return `
      <div class="player-wrapper" onclick="flipCard(this)">
        <div class="player-card-inner">
          <div class="player-front">
            <div class="player-info-container" style="height:100%; display:flex; flex-direction:column;">
              <div>
                <h4 class="p-nick">${p.nick}</h4>
                <div class="p-role">${p.role}</div>
                <div class="p-quote">"${p.quote || 'Ready to win'}"</div>
              </div>
              
              <div class="stats-grid">
                <div class="stat-item rank-full">
                  <div class="stat-val s-rnk">${rank}</div>
                  <div class="stat-label">Rank</div>
                </div>
                <div class="stat-item">
                  <div class="stat-val s-kd">${kd}</div>
                  <div class="stat-label">K/D</div>
                </div>
                <div class="stat-item">
                  <div class="stat-val s-hs">${hs}</div>
                  <div class="stat-label">HS%</div>
                </div>
              </div>
            </div>
          </div>
          <div class="player-back">
            <img src="${imgUrl}" alt="${p.nick}" loading="lazy">
          </div>
        </div>
      </div>`;
  };

  // 1. MATCH UPDATES
  onSnapshot(doc(db, "siteData", "match"), (docSnap) => {
      if(docSnap.exists()) {
          const data = docSnap.data();
          const enemyBlocks = document.querySelectorAll('.team-name');
          // Update Enemy Name (2nd block usually)
          if(enemyBlocks.length > 1) enemyBlocks[1].innerText = data.enemy || "TBA";
          
          if(data.date) {
            let timeString = data.date;
            if (timeString.length === 16) timeString += ":00"; 
            window.CONF.match = new Date(timeString + "+03:00");
          }
      }
  });

  // 2. MAIN ROSTER
  onSnapshot(doc(db, "siteData", "roster"), (docSnap) => {
      const container = document.getElementById('dynamic-roster');
      if(docSnap.exists() && container) {
          const players = docSnap.data().list || [];
          container.innerHTML = players.map(p => renderPlayer(p)).join('');
      } else if (container) {
          container.innerHTML = '<div class="text-center" style="grid-column:1/-1;">Roster updating...</div>';
      }
  });

  // 3. RESERVE ROSTER
  onSnapshot(doc(db, "siteData", "reserve"), (docSnap) => {
      const container = document.getElementById('reserve-roster');
      if(docSnap.exists() && container) {
          const players = docSnap.data().list || [];
          container.innerHTML = players.map(p => renderPlayer(p)).join('');
      }
  });

  // 4. HISTORY
  onSnapshot(doc(db, "siteData", "history"), (docSnap) => {
      if(docSnap.exists()) {
          const matches = docSnap.data().list || [];
          const fullHistory = document.getElementById('full-history-container');
          const latestWidget = document.getElementById('latest-results-container');
          const winRateEl = document.getElementById('win-rate-val'); 
          
          if(matches.length === 0) {
             if(fullHistory) fullHistory.innerHTML = "<p class='text-center'>–ù–µ—Ç —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –º–∞—Ç—á–µ–π</p>";
             return;
          }

          // WR Logic
          const wins = matches.filter(m => parseInt(m.ourScore) > parseInt(m.enemyScore)).length;
          if(winRateEl) winRateEl.innerText = Math.round((wins / matches.length) * 100) + '%';

          const reversedMatches = [...matches].reverse();

          // Full History Render
          if(fullHistory) {
              fullHistory.innerHTML = reversedMatches.map(m => {
                  const isWin = parseInt(m.ourScore) > parseInt(m.enemyScore);
                  return `
                  <div class="history-card ${isWin ? 'win-border' : 'lose-border'}">
                      <div class="h-info">
                          <span class="h-tour">${m.tournament || 'Showmatch'}</span>
                          <span class="h-opponent">vs ${m.enemy}</span>
                          ${m.screenshot ? `<button onclick="window.open('${m.screenshot}', '_blank')" class="btn-glitch" style="padding: 4px 8px; font-size: 8px; margin-top: 5px; width: auto; height: auto;">PROOF</button>` : ''}
                      </div>
                      <div class="h-result" style="text-align:right;">
                          <div class="h-score">${m.ourScore} : ${m.enemyScore}</div>
                          <div class="h-status ${isWin ? 'text-win' : 'text-lose'}">${isWin ? 'WIN' : 'LOSE'}</div>
                      </div>
                  </div>`;
              }).join('');
          }

          // Latest Widget Render (Top 3)
          if(latestWidget) {
              latestWidget.innerHTML = reversedMatches.slice(0, 3).map(m => {
                  const isWin = parseInt(m.ourScore) > parseInt(m.enemyScore);
                  return `
                  <div class="result-row">
                      <span>vs ${m.enemy}</span>
                      <span class="${isWin ? 'res-win' : 'res-lose'}">${m.ourScore} : ${m.enemyScore}</span>
                  </div>`;
              }).join('');
          }
      }
  });
  // 5. –ù–û–í–û–°–¢–ò (–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü script type="module")
  onSnapshot(doc(db, "siteData", "news"), (docSnap) => {
      const container = document.getElementById('dynamic-news-container');
      if(docSnap.exists() && container) {
          const newsList = docSnap.data().list || [];
          
          if(newsList.length === 0) {
              container.innerHTML = '<div class="card text-center"><p>–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç.</p></div>';
              return;
          }

          container.innerHTML = newsList.map(item => `
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                   <span style="font-size: 10px; background: var(--accent); color: #fff; padding: 4px 8px; border-radius: 4px; font-weight: 700;">${item.tag || 'NEWS'}</span>
                   <span style="font-size: 10px; color: var(--text-gray);">${item.date || ''}</span>
                </div>
                <h3 style="margin-bottom: 10px;">${item.title}</h3>
                <p>${item.text}</p>
            </div>
          `).join('');
      }
  });


  </script>
</body>
</html>
